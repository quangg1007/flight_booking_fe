import{a as Ee,b as Zi}from"./chunk-DMUCWS35.js";import{a as pt}from"./chunk-KTHKAOYV.js";import{$ as I,$b as lt,Aa as Bt,B as vi,Ba as Ut,C as Ft,Ca as jt,D as At,Da as q,Db as Ai,E as le,Ea as S,F as xi,Fa as b,Fb as Ri,G as bi,Ga as J,H as wi,I as de,Ia as ki,Ib as zt,J as yi,Ja as K,Jb as Ni,Ka as U,Kb as Bi,L as Si,La as j,Lb as W,M as T,Mb as Ui,N as pe,Nb as ji,O as Oe,Oa as ge,Pa as m,Q as Ci,Qa as _,Qb as Wi,R as Xe,Ra as O,Rb as zi,S as F,Sa as it,T as A,Ta as Be,U as _i,Ua as Ue,Ub as qi,V as Oi,Va as nt,Vb as Ki,W as Ti,Wa as Vi,Wb as $i,X as Ei,Xa as ee,Xb as Gi,Y as se,Yb as Qi,Z as et,Za as Mi,Zb as at,_ as ue,_a as je,_b as Yi,a as M,aa as fe,ab as Pi,b as P,ba as Li,ca as Ii,cb as te,da as Di,db as ie,dc as Ji,fa as c,fb as ve,g as Pt,ga as y,gb as xe,ha as Ne,hb as be,i as ci,ia as D,ib as Wt,ic as We,j as hi,jb as Hi,k as Ge,kb as rt,kc as ze,l as mi,la as Rt,lb as ce,lc as Xi,m as ui,ma as w,mb as $,mc as dt,n as Qe,na as tt,nc as en,oa as u,p as _e,pa as Nt,pb as Fi,q as Ye,qa as Te,qb as ot,r as Ht,s as fi,sa as X,ta as R,tb as V,u as Re,ub as st,v as gi,va as N,w as Je,wa as B,xa as a,y as Ze,ya as l,za as v}from"./chunk-YACVS6DH.js";var tn=(()=>{class i{filterFlights(e,t){return e.filter(r=>this.matchesAllCriteria(r,t))}matchesAllCriteria(e,t){return this.matchesPrice(e,t.priceRange)&&this.matchesStops(e,t.stopPrices)&&this.matchesAirlines(e,t.carriers)&&this.matchesTimeRange(e,t.timeRange)&&this.matchesAirports(e,t.airports)}matchesPrice(e,t){let r=Math.round(e.price.raw);return r>=t.minPrice&&r<=t.maxPrice}matchesStops(e,t){let r=e.legs[0].stopCount;return!(r===0&&!t.direct.isActive||r===1&&!t.one.isActive||r>=2&&!t.twoOrMore.isActive)}matchesAirlines(e,t){return e.legs[0].carriers.marketing.map(o=>o.id).some(o=>t.some(s=>s.id===o&&s.isActive))}matchesTimeRange(e,t){let r=new Date(e.legs[0].departure),o=new Date(e.legs[0].arrival),s=new Date(t.minTimeDeparture),d=new Date(t.maxTimeDeparture),h=new Date(t.minTimeLanding),g=new Date(t.maxTimeLanding);return r>=s&&r<=d&&o>=h&&o<=g}matchesAirports(e,t){let r=e.legs[0].origin.entityId,o=e.legs[0].destination.entityId;return t.every(s=>s.airports.some(h=>parseInt(h.entityId)===parseInt(r)||parseInt(h.entityId)===parseInt(o)?h.isActive:!0))}static{this.\u0275fac=function(t){return new(t||i)}}static{this.\u0275prov=wi({token:i,factory:i.\u0275fac,providedIn:"root"})}}return i})();function C(i){return typeof i=="function"}function ct(i){let e=i(t=>{Error.call(t),t.stack=new Error().stack});return e.prototype=Object.create(Error.prototype),e.prototype.constructor=e,e}var ht=ct(i=>function(e){i(this),this.message=e?`${e.length} errors occurred during unsubscription:
${e.map((t,r)=>`${r+1}) ${t.toString()}`).join(`
  `)}`:"",this.name="UnsubscriptionError",this.errors=e});function we(i,n){if(i){let e=i.indexOf(n);0<=e&&i.splice(e,1)}}var Q=class i{constructor(n){this.initialTeardown=n,this.closed=!1,this._parentage=null,this._finalizers=null}unsubscribe(){let n;if(!this.closed){this.closed=!0;let{_parentage:e}=this;if(e)if(this._parentage=null,Array.isArray(e))for(let o of e)o.remove(this);else e.remove(this);let{initialTeardown:t}=this;if(C(t))try{t()}catch(o){n=o instanceof ht?o.errors:[o]}let{_finalizers:r}=this;if(r){this._finalizers=null;for(let o of r)try{nn(o)}catch(s){n=n??[],s instanceof ht?n=[...n,...s.errors]:n.push(s)}}if(n)throw new ht(n)}}add(n){var e;if(n&&n!==this)if(this.closed)nn(n);else{if(n instanceof i){if(n.closed||n._hasParent(this))return;n._addParent(this)}(this._finalizers=(e=this._finalizers)!==null&&e!==void 0?e:[]).push(n)}}_hasParent(n){let{_parentage:e}=this;return e===n||Array.isArray(e)&&e.includes(n)}_addParent(n){let{_parentage:e}=this;this._parentage=Array.isArray(e)?(e.push(n),e):e?[e,n]:n}_removeParent(n){let{_parentage:e}=this;e===n?this._parentage=null:Array.isArray(e)&&we(e,n)}remove(n){let{_finalizers:e}=this;e&&we(e,n),n instanceof i&&n._removeParent(this)}};Q.EMPTY=(()=>{let i=new Q;return i.closed=!0,i})();var qt=Q.EMPTY;function mt(i){return i instanceof Q||i&&"closed"in i&&C(i.remove)&&C(i.add)&&C(i.unsubscribe)}function nn(i){C(i)?i():i.unsubscribe()}var Z={onUnhandledError:null,onStoppedNotification:null,Promise:void 0,useDeprecatedSynchronousErrorHandling:!1,useDeprecatedNextContext:!1};var Le={setTimeout(i,n,...e){let{delegate:t}=Le;return t?.setTimeout?t.setTimeout(i,n,...e):setTimeout(i,n,...e)},clearTimeout(i){let{delegate:n}=Le;return(n?.clearTimeout||clearTimeout)(i)},delegate:void 0};function ut(i){Le.setTimeout(()=>{let{onUnhandledError:n}=Z;if(n)n(i);else throw i})}function Kt(){}var rn=$t("C",void 0,void 0);function on(i){return $t("E",void 0,i)}function sn(i){return $t("N",i,void 0)}function $t(i,n,e){return{kind:i,value:n,error:e}}var ye=null;function Ie(i){if(Z.useDeprecatedSynchronousErrorHandling){let n=!ye;if(n&&(ye={errorThrown:!1,error:null}),i(),n){let{errorThrown:e,error:t}=ye;if(ye=null,e)throw t}}else i()}function an(i){Z.useDeprecatedSynchronousErrorHandling&&ye&&(ye.errorThrown=!0,ye.error=i)}var Se=class extends Q{constructor(n){super(),this.isStopped=!1,n?(this.destination=n,mt(n)&&n.add(this)):this.destination=Gn}static create(n,e,t){return new De(n,e,t)}next(n){this.isStopped?Qt(sn(n),this):this._next(n)}error(n){this.isStopped?Qt(on(n),this):(this.isStopped=!0,this._error(n))}complete(){this.isStopped?Qt(rn,this):(this.isStopped=!0,this._complete())}unsubscribe(){this.closed||(this.isStopped=!0,super.unsubscribe(),this.destination=null)}_next(n){this.destination.next(n)}_error(n){try{this.destination.error(n)}finally{this.unsubscribe()}}_complete(){try{this.destination.complete()}finally{this.unsubscribe()}}},Kn=Function.prototype.bind;function Gt(i,n){return Kn.call(i,n)}var Yt=class{constructor(n){this.partialObserver=n}next(n){let{partialObserver:e}=this;if(e.next)try{e.next(n)}catch(t){ft(t)}}error(n){let{partialObserver:e}=this;if(e.error)try{e.error(n)}catch(t){ft(t)}else ft(n)}complete(){let{partialObserver:n}=this;if(n.complete)try{n.complete()}catch(e){ft(e)}}},De=class extends Se{constructor(n,e,t){super();let r;if(C(n)||!n)r={next:n??void 0,error:e??void 0,complete:t??void 0};else{let o;this&&Z.useDeprecatedNextContext?(o=Object.create(n),o.unsubscribe=()=>this.unsubscribe(),r={next:n.next&&Gt(n.next,o),error:n.error&&Gt(n.error,o),complete:n.complete&&Gt(n.complete,o)}):r=n}this.destination=new Yt(r)}};function ft(i){Z.useDeprecatedSynchronousErrorHandling?an(i):ut(i)}function $n(i){throw i}function Qt(i,n){let{onStoppedNotification:e}=Z;e&&Le.setTimeout(()=>e(i,n))}var Gn={closed:!0,next:Kt,error:$n,complete:Kt};var ke=typeof Symbol=="function"&&Symbol.observable||"@@observable";function Ve(i){return i}function ln(i){return i.length===0?Ve:i.length===1?i[0]:function(e){return i.reduce((t,r)=>r(t),e)}}var Y=(()=>{class i{constructor(e){e&&(this._subscribe=e)}lift(e){let t=new i;return t.source=this,t.operator=e,t}subscribe(e,t,r){let o=Yn(e)?e:new De(e,t,r);return Ie(()=>{let{operator:s,source:d}=this;o.add(s?s.call(o,d):d?this._subscribe(o):this._trySubscribe(o))}),o}_trySubscribe(e){try{return this._subscribe(e)}catch(t){e.error(t)}}forEach(e,t){return t=dn(t),new t((r,o)=>{let s=new De({next:d=>{try{e(d)}catch(h){o(h),s.unsubscribe()}},error:o,complete:r});this.subscribe(s)})}_subscribe(e){var t;return(t=this.source)===null||t===void 0?void 0:t.subscribe(e)}[ke](){return this}pipe(...e){return ln(e)(this)}toPromise(e){return e=dn(e),new e((t,r)=>{let o;this.subscribe(s=>o=s,s=>r(s),()=>t(o))})}}return i.create=n=>new i(n),i})();function dn(i){var n;return(n=i??Z.Promise)!==null&&n!==void 0?n:Promise}function Qn(i){return i&&C(i.next)&&C(i.error)&&C(i.complete)}function Yn(i){return i&&i instanceof Se||Qn(i)&&mt(i)}function Jn(i){return C(i?.lift)}function he(i){return n=>{if(Jn(n))return n.lift(function(e){try{return i(e,this)}catch(t){this.error(t)}});throw new TypeError("Unable to lift unknown Observable type")}}function ae(i,n,e,t,r){return new Jt(i,n,e,t,r)}var Jt=class extends Se{constructor(n,e,t,r,o,s){super(n),this.onFinalize=o,this.shouldUnsubscribe=s,this._next=e?function(d){try{e(d)}catch(h){n.error(h)}}:super._next,this._error=r?function(d){try{r(d)}catch(h){n.error(h)}finally{this.unsubscribe()}}:super._error,this._complete=t?function(){try{t()}catch(d){n.error(d)}finally{this.unsubscribe()}}:super._complete}unsubscribe(){var n;if(!this.shouldUnsubscribe||this.shouldUnsubscribe()){let{closed:e}=this;super.unsubscribe(),!e&&((n=this.onFinalize)===null||n===void 0||n.call(this))}}};var pn=ct(i=>function(){i(this),this.name="ObjectUnsubscribedError",this.message="object unsubscribed"});var Ce=(()=>{class i extends Y{constructor(){super(),this.closed=!1,this.currentObservers=null,this.observers=[],this.isStopped=!1,this.hasError=!1,this.thrownError=null}lift(e){let t=new gt(this,this);return t.operator=e,t}_throwIfClosed(){if(this.closed)throw new pn}next(e){Ie(()=>{if(this._throwIfClosed(),!this.isStopped){this.currentObservers||(this.currentObservers=Array.from(this.observers));for(let t of this.currentObservers)t.next(e)}})}error(e){Ie(()=>{if(this._throwIfClosed(),!this.isStopped){this.hasError=this.isStopped=!0,this.thrownError=e;let{observers:t}=this;for(;t.length;)t.shift().error(e)}})}complete(){Ie(()=>{if(this._throwIfClosed(),!this.isStopped){this.isStopped=!0;let{observers:e}=this;for(;e.length;)e.shift().complete()}})}unsubscribe(){this.isStopped=this.closed=!0,this.observers=this.currentObservers=null}get observed(){var e;return((e=this.observers)===null||e===void 0?void 0:e.length)>0}_trySubscribe(e){return this._throwIfClosed(),super._trySubscribe(e)}_subscribe(e){return this._throwIfClosed(),this._checkFinalizedStatuses(e),this._innerSubscribe(e)}_innerSubscribe(e){let{hasError:t,isStopped:r,observers:o}=this;return t||r?qt:(this.currentObservers=null,o.push(e),new Q(()=>{this.currentObservers=null,we(o,e)}))}_checkFinalizedStatuses(e){let{hasError:t,thrownError:r,isStopped:o}=this;t?e.error(r):o&&e.complete()}asObservable(){let e=new Y;return e.source=this,e}}return i.create=(n,e)=>new gt(n,e),i})(),gt=class extends Ce{constructor(n,e){super(),this.destination=n,this.source=e}next(n){var e,t;(t=(e=this.destination)===null||e===void 0?void 0:e.next)===null||t===void 0||t.call(e,n)}error(n){var e,t;(t=(e=this.destination)===null||e===void 0?void 0:e.error)===null||t===void 0||t.call(e,n)}complete(){var n,e;(e=(n=this.destination)===null||n===void 0?void 0:n.complete)===null||e===void 0||e.call(n)}_subscribe(n){var e,t;return(t=(e=this.source)===null||e===void 0?void 0:e.subscribe(n))!==null&&t!==void 0?t:qt}};var Zt={now(){return(Zt.delegate||Date).now()},delegate:void 0};var vt=class extends Q{constructor(n,e){super()}schedule(n,e=0){return this}};var qe={setInterval(i,n,...e){let{delegate:t}=qe;return t?.setInterval?t.setInterval(i,n,...e):setInterval(i,n,...e)},clearInterval(i){let{delegate:n}=qe;return(n?.clearInterval||clearInterval)(i)},delegate:void 0};var xt=class extends vt{constructor(n,e){super(n,e),this.scheduler=n,this.work=e,this.pending=!1}schedule(n,e=0){var t;if(this.closed)return this;this.state=n;let r=this.id,o=this.scheduler;return r!=null&&(this.id=this.recycleAsyncId(o,r,e)),this.pending=!0,this.delay=e,this.id=(t=this.id)!==null&&t!==void 0?t:this.requestAsyncId(o,this.id,e),this}requestAsyncId(n,e,t=0){return qe.setInterval(n.flush.bind(n,this),t)}recycleAsyncId(n,e,t=0){if(t!=null&&this.delay===t&&this.pending===!1)return e;e!=null&&qe.clearInterval(e)}execute(n,e){if(this.closed)return new Error("executing a cancelled action");this.pending=!1;let t=this._execute(n,e);if(t)return t;this.pending===!1&&this.id!=null&&(this.id=this.recycleAsyncId(this.scheduler,this.id,null))}_execute(n,e){let t=!1,r;try{this.work(n)}catch(o){t=!0,r=o||new Error("Scheduled action threw falsy error")}if(t)return this.unsubscribe(),r}unsubscribe(){if(!this.closed){let{id:n,scheduler:e}=this,{actions:t}=e;this.work=this.state=this.scheduler=null,this.pending=!1,we(t,this),n!=null&&(this.id=this.recycleAsyncId(e,n,null)),this.delay=null,super.unsubscribe()}}};var Me=class i{constructor(n,e=i.now){this.schedulerActionCtor=n,this.now=e}schedule(n,e=0,t){return new this.schedulerActionCtor(this,n).schedule(t,e)}};Me.now=Zt.now;var bt=class extends Me{constructor(n,e=Me.now){super(n,e),this.actions=[],this._active=!1}flush(n){let{actions:e}=this;if(this._active){e.push(n);return}let t;this._active=!0;do if(t=n.execute(n.state,n.delay))break;while(n=e.shift());if(this._active=!1,t){for(;n=e.shift();)n.unsubscribe();throw t}}};var Xt=new bt(xt),cn=Xt;function hn(i){return i&&C(i.schedule)}var mn=i=>i&&typeof i.length=="number"&&typeof i!="function";function un(i){return C(i?.then)}function fn(i){return C(i[ke])}function gn(i){return Symbol.asyncIterator&&C(i?.[Symbol.asyncIterator])}function vn(i){return new TypeError(`You provided ${i!==null&&typeof i=="object"?"an invalid object":`'${i}'`} where a stream was expected. You can provide an Observable, Promise, ReadableStream, Array, AsyncIterable, or Iterable.`)}function Zn(){return typeof Symbol!="function"||!Symbol.iterator?"@@iterator":Symbol.iterator}var xn=Zn();function bn(i){return C(i?.[xn])}function wn(i){return mi(this,arguments,function*(){let e=i.getReader();try{for(;;){let{value:t,done:r}=yield Ge(e.read());if(r)return yield Ge(void 0);yield yield Ge(t)}}finally{e.releaseLock()}})}function yn(i){return C(i?.getReader)}function Sn(i){if(i instanceof Y)return i;if(i!=null){if(fn(i))return Xn(i);if(mn(i))return er(i);if(un(i))return tr(i);if(gn(i))return Cn(i);if(bn(i))return ir(i);if(yn(i))return nr(i)}throw vn(i)}function Xn(i){return new Y(n=>{let e=i[ke]();if(C(e.subscribe))return e.subscribe(n);throw new TypeError("Provided object does not correctly implement Symbol.observable")})}function er(i){return new Y(n=>{for(let e=0;e<i.length&&!n.closed;e++)n.next(i[e]);n.complete()})}function tr(i){return new Y(n=>{i.then(e=>{n.closed||(n.next(e),n.complete())},e=>n.error(e)).then(null,ut)})}function ir(i){return new Y(n=>{for(let e of i)if(n.next(e),n.closed)return;n.complete()})}function Cn(i){return new Y(n=>{rr(i,n).catch(e=>n.error(e))})}function nr(i){return Cn(wn(i))}function rr(i,n){var e,t,r,o;return hi(this,void 0,void 0,function*(){try{for(e=ui(i);t=yield e.next(),!t.done;){let s=t.value;if(n.next(s),n.closed)return}}catch(s){r={error:s}}finally{try{t&&!t.done&&(o=e.return)&&(yield o.call(e))}finally{if(r)throw r.error}}n.complete()})}function _n(i){return i instanceof Date&&!isNaN(i)}function On(i=0,n,e=cn){let t=-1;return n!=null&&(hn(n)?e=n:t=n),new Y(r=>{let o=_n(i)?+i-e.now():i;o<0&&(o=0);let s=0;return e.schedule(function(){r.closed||(r.next(s++),0<=t?this.schedule(void 0,t):r.complete())},o)})}function ei(i,n){return he((e,t)=>{let r=0;e.subscribe(ae(t,o=>i.call(n,o,r++)&&t.next(o)))})}function wt(i,n=Ve){return i=i??or,he((e,t)=>{let r,o=!0;e.subscribe(ae(t,s=>{let d=n(s);(o||!i(r,d))&&(o=!1,r=d,t.next(s))}))})}function or(i,n){return i===n}function yt(i,n,e){let t=C(i)||n||e?{next:i,error:n,complete:e}:i;return t?he((r,o)=>{var s;(s=t.subscribe)===null||s===void 0||s.call(t);let d=!0;r.subscribe(ae(o,h=>{var g;(g=t.next)===null||g===void 0||g.call(t,h),o.next(h)},()=>{var h;d=!1,(h=t.complete)===null||h===void 0||h.call(t),o.complete()},h=>{var g;d=!1,(g=t.error)===null||g===void 0||g.call(t,h),o.error(h)},()=>{var h,g;d&&((h=t.unsubscribe)===null||h===void 0||h.call(t)),(g=t.finalize)===null||g===void 0||g.call(t)}))}):Ve}function Tn(i,n){return he((e,t)=>{let{leading:r=!0,trailing:o=!1}=n??{},s=!1,d=null,h=null,g=!1,x=()=>{h?.unsubscribe(),h=null,o&&(H(),g&&t.complete())},L=()=>{h=null,g&&t.complete()},k=oe=>h=Sn(i(oe)).subscribe(ae(t,x,L)),H=()=>{if(s){s=!1;let oe=d;d=null,t.next(oe),!g&&k(oe)}};e.subscribe(ae(t,oe=>{s=!0,d=oe,!(h&&!h.closed)&&(r?H():k(oe))},()=>{g=!0,!(o&&s&&h&&!h.closed)&&t.complete()}))})}function St(i,n=Xt,e){let t=On(i,n);return Tn(()=>t,e)}var G=typeof window<"u"?window:{screen:{},navigator:{}},Pe=(G.matchMedia||function(){return{matches:!1}}).bind(G),En=!1,sr={get passive(){return En=!0}},Ln=function(){};G.addEventListener&&G.addEventListener("p",Ln,sr);G.removeEventListener&&G.removeEventListener("p",Ln,!1);var Ct=En,kl="PointerEvent"in G,ti="ontouchstart"in G,ar="TouchEvent"in G,lr=ti||ar&&Pe("(any-pointer: coarse)").matches,Vl=(G.navigator.maxTouchPoints||0)>0||lr,In=G.navigator.userAgent||"",dr=Pe("(pointer: coarse)").matches&&/iPad|Macintosh/.test(In)&&Math.min(G.screen.width||0,G.screen.height||0)>=768,Ml=(Pe("(pointer: coarse)").matches||!Pe("(pointer: fine)").matches&&ti)&&!/Windows.*Firefox/.test(In),Pl=Pe("(any-pointer: fine)").matches||Pe("(any-hover: hover)").matches||dr||!ti;var pr=(i,n,e)=>({tooltip:i,placement:n,content:e});function cr(i,n){}function hr(i,n){i&1&&w(0,cr,0,0,"ng-template")}function mr(i,n){if(i&1&&(Bt(0),w(1,hr,1,0,null,1),Ut()),i&2){let e=b();c(),u("ngTemplateOutlet",e.template)("ngTemplateOutletContext",Pi(2,pr,e.tooltip,e.placement,e.content))}}function ur(i,n){if(i&1&&(Bt(0),a(1,"div",2),m(2),l(),Ut()),i&2){let e=b();c(),tt("title",e.tooltip)("data-tooltip-placement",e.placement),c(),O(" ",e.content," ")}}var fr=["tooltipTemplate"],gr=["leftOuterSelectionBar"],vr=["rightOuterSelectionBar"],xr=["fullBar"],br=["selectionBar"],wr=["minHandle"],yr=["maxHandle"],Sr=["floorLabel"],Cr=["ceilLabel"],_r=["minHandleLabel"],Or=["maxHandleLabel"],Tr=["combinedLabel"],Er=["ticksElement"],Lr=i=>({"ngx-slider-selected":i});function Ir(i,n){if(i&1&&v(0,"ngx-slider-tooltip-wrapper",32),i&2){let e=b().$implicit,t=b();u("template",t.tooltipTemplate)("tooltip",e.valueTooltip)("placement",e.valueTooltipPlacement)("content",e.value)}}function Dr(i,n){if(i&1&&v(0,"span",33),i&2){let e=b().$implicit;u("innerText",e.legend)}}function kr(i,n){if(i&1&&v(0,"span",34),i&2){let e=b().$implicit;u("innerHTML",e.legend,Li)}}function Vr(i,n){if(i&1&&(a(0,"span",27),v(1,"ngx-slider-tooltip-wrapper",28),w(2,Ir,1,4,"ngx-slider-tooltip-wrapper",29)(3,Dr,1,1,"span",30)(4,kr,1,1,"span",31),l()),i&2){let e=n.$implicit,t=b();u("ngClass",je(8,Lr,e.selected))("ngStyle",e.style),c(),u("template",t.tooltipTemplate)("tooltip",e.tooltip)("placement",e.tooltipPlacement),c(),u("ngIf",e.value!==null&&e.value!==void 0),c(),u("ngIf",e.legend!==null&&e.legend!==void 0&&t.allowUnsafeHtmlInSlider===!1),c(),u("ngIf",e.legend!==null&&e.legend!==void 0&&(t.allowUnsafeHtmlInSlider===null||t.allowUnsafeHtmlInSlider===void 0||t.allowUnsafeHtmlInSlider))}}var ne=function(i){return i[i.Low=0]="Low",i[i.High=1]="High",i[i.Floor=2]="Floor",i[i.Ceil=3]="Ceil",i[i.TickValue=4]="TickValue",i}(ne||{}),Fe=class{floor=0;ceil=null;step=1;minRange=null;maxRange=null;pushRange=!1;minLimit=null;maxLimit=null;translate=null;combineLabels=null;getLegend=null;getStepLegend=null;stepsArray=null;bindIndexForStepsArray=!1;draggableRange=!1;draggableRangeOnly=!1;showSelectionBar=!1;showSelectionBarEnd=!1;showSelectionBarFromValue=null;showOuterSelectionBars=!1;hidePointerLabels=!1;hideLimitLabels=!1;autoHideLimitLabels=!0;readOnly=!1;disabled=!1;showTicks=!1;showTicksValues=!1;tickStep=null;tickValueStep=null;ticksArray=null;ticksTooltip=null;ticksValuesTooltip=null;vertical=!1;getSelectionBarColor=null;getTickColor=null;getPointerColor=null;keyboardSupport=!0;scale=1;rotate=0;enforceStep=!0;enforceRange=!0;enforceStepsArray=!0;noSwitching=!1;onlyBindHandles=!1;rightToLeft=!1;reversedControls=!1;boundPointerLabels=!0;logScale=!1;customValueToPosition=null;customPositionToValue=null;precisionLimit=12;selectionBarGradient=null;ariaLabel="ngx-slider";ariaLabelledBy=null;ariaLabelHigh="ngx-slider-max";ariaLabelledByHigh=null;handleDimension=null;barDimension=null;animate=!0;animateOnMove=!1},Dn=new yi("AllowUnsafeHtmlInSlider"),f=function(i){return i[i.Min=0]="Min",i[i.Max=1]="Max",i}(f||{}),ni=class{value;highValue;pointerType},p=class{static isNullOrUndefined(n){return n==null}static areArraysEqual(n,e){if(n.length!==e.length)return!1;for(let t=0;t<n.length;++t)if(n[t]!==e[t])return!1;return!0}static linearValueToPosition(n,e,t){let r=t-e;return(n-e)/r}static logValueToPosition(n,e,t){n=Math.log(n),e=Math.log(e),t=Math.log(t);let r=t-e;return(n-e)/r}static linearPositionToValue(n,e,t){return n*(t-e)+e}static logPositionToValue(n,e,t){e=Math.log(e),t=Math.log(t);let r=n*(t-e)+e;return Math.exp(r)}static findStepIndex(n,e){let t=e.map(o=>Math.abs(n-o.value)),r=0;for(let o=0;o<e.length;o++)t[o]!==t[r]&&t[o]<t[r]&&(r=o);return r}},re=class{static isTouchEvent(n){return window.TouchEvent!==void 0?n instanceof TouchEvent:n.touches!==void 0}static isResizeObserverAvailable(){return window.ResizeObserver!==void 0}},E=class{static roundToPrecisionLimit(n,e){return+n.toPrecision(e)}static isModuloWithinPrecisionLimit(n,e,t){let r=Math.pow(10,-t);return Math.abs(n%e)<=r||Math.abs(Math.abs(n%e)-e)<=r}static clampToRange(n,e,t){return Math.min(Math.max(n,e),t)}},_t=class{eventName=null;events=null;eventsSubscription=null;teardownCallback=null},Ot=class{renderer;constructor(n){this.renderer=n}attachPassiveEventListener(n,e,t,r){if(Ct!==!0)return this.attachEventListener(n,e,t,r);let o=new _t;o.eventName=e,o.events=new Ce;let s=d=>{o.events.next(d)};return n.addEventListener(e,s,{passive:!0,capture:!1}),o.teardownCallback=()=>{n.removeEventListener(e,s,{passive:!0,capture:!1})},o.eventsSubscription=o.events.pipe(p.isNullOrUndefined(r)?yt(()=>{}):St(r,void 0,{leading:!0,trailing:!0})).subscribe(d=>{t(d)}),o}detachEventListener(n){p.isNullOrUndefined(n.eventsSubscription)||(n.eventsSubscription.unsubscribe(),n.eventsSubscription=null),p.isNullOrUndefined(n.events)||(n.events.complete(),n.events=null),p.isNullOrUndefined(n.teardownCallback)||(n.teardownCallback(),n.teardownCallback=null)}attachEventListener(n,e,t,r){let o=new _t;o.eventName=e,o.events=new Ce;let s=d=>{o.events.next(d)};return o.teardownCallback=this.renderer.listen(n,e,s),o.eventsSubscription=o.events.pipe(p.isNullOrUndefined(r)?yt(()=>{}):St(r,void 0,{leading:!0,trailing:!0})).subscribe(d=>{t(d)}),o}},me=(()=>{class i{elemRef;renderer;changeDetectionRef;_position=0;get position(){return this._position}_dimension=0;get dimension(){return this._dimension}_alwaysHide=!1;get alwaysHide(){return this._alwaysHide}_vertical=!1;get vertical(){return this._vertical}_scale=1;get scale(){return this._scale}_rotate=0;get rotate(){return this._rotate}opacity=1;visibility="visible";left="";bottom="";height="";width="";transform="";eventListenerHelper;eventListeners=[];constructor(e,t,r){this.elemRef=e,this.renderer=t,this.changeDetectionRef=r,this.eventListenerHelper=new Ot(this.renderer)}setAlwaysHide(e){this._alwaysHide=e,e?this.visibility="hidden":this.visibility="visible"}hide(){this.opacity=0}show(){this.alwaysHide||(this.opacity=1)}isVisible(){return this.alwaysHide?!1:this.opacity!==0}setVertical(e){this._vertical=e,this._vertical?(this.left="",this.width=""):(this.bottom="",this.height="")}setScale(e){this._scale=e}setRotate(e){this._rotate=e,this.transform="rotate("+e+"deg)"}getRotate(){return this._rotate}setPosition(e){this._position!==e&&!this.isRefDestroyed()&&this.changeDetectionRef.markForCheck(),this._position=e,this._vertical?this.bottom=Math.round(e)+"px":this.left=Math.round(e)+"px"}calculateDimension(){let e=this.getBoundingClientRect();this.vertical?this._dimension=(e.bottom-e.top)*this.scale:this._dimension=(e.right-e.left)*this.scale}setDimension(e){this._dimension!==e&&!this.isRefDestroyed()&&this.changeDetectionRef.markForCheck(),this._dimension=e,this._vertical?this.height=Math.round(e)+"px":this.width=Math.round(e)+"px"}getBoundingClientRect(){return this.elemRef.nativeElement.getBoundingClientRect()}on(e,t,r){let o=this.eventListenerHelper.attachEventListener(this.elemRef.nativeElement,e,t,r);this.eventListeners.push(o)}onPassive(e,t,r){let o=this.eventListenerHelper.attachPassiveEventListener(this.elemRef.nativeElement,e,t,r);this.eventListeners.push(o)}off(e){let t,r;p.isNullOrUndefined(e)?(t=[],r=this.eventListeners):(t=this.eventListeners.filter(o=>o.eventName!==e),r=this.eventListeners.filter(o=>o.eventName===e));for(let o of r)this.eventListenerHelper.detachEventListener(o);this.eventListeners=t}isRefDestroyed(){return p.isNullOrUndefined(this.changeDetectionRef)||this.changeDetectionRef.destroyed}static \u0275fac=function(t){return new(t||i)(y(fe),y(Ne),y(xe))};static \u0275dir=Oe({type:i,selectors:[["","ngxSliderElement",""]],hostVars:14,hostBindings:function(t,r){t&2&&Nt("opacity",r.opacity)("visibility",r.visibility)("left",r.left)("bottom",r.bottom)("height",r.height)("width",r.width)("transform",r.transform)}})}return i})(),ii=(()=>{class i extends me{active=!1;role="";tabindex="";ariaOrientation="";ariaLabel="";ariaLabelledBy="";ariaValueNow="";ariaValueText="";ariaValueMin="";ariaValueMax="";focus(){this.elemRef.nativeElement.focus()}focusIfNeeded(){document.activeElement!==this.elemRef.nativeElement&&this.elemRef.nativeElement.focus()}constructor(e,t,r){super(e,t,r)}static \u0275fac=function(t){return new(t||i)(y(fe),y(Ne),y(xe))};static \u0275dir=Oe({type:i,selectors:[["","ngxSliderHandle",""]],hostVars:11,hostBindings:function(t,r){t&2&&(tt("role",r.role)("tabindex",r.tabindex)("aria-orientation",r.ariaOrientation)("aria-label",r.ariaLabel)("aria-labelledby",r.ariaLabelledBy)("aria-valuenow",r.ariaValueNow)("aria-valuetext",r.ariaValueText)("aria-valuemin",r.ariaValueMin)("aria-valuemax",r.ariaValueMax),Te("ngx-slider-active",r.active))},features:[Rt]})}return i})(),He=(()=>{class i extends me{allowUnsafeHtmlInSlider;_value=null;get value(){return this._value}constructor(e,t,r,o){super(e,t,r),this.allowUnsafeHtmlInSlider=o}setValue(e){let t=!1;!this.alwaysHide&&(p.isNullOrUndefined(this.value)||this.value.length!==e.length||this.value.length>0&&this.dimension===0)&&(t=!0),this._value=e,this.allowUnsafeHtmlInSlider===!1?this.elemRef.nativeElement.innerText=e:this.elemRef.nativeElement.innerHTML=e,t&&this.calculateDimension()}static \u0275fac=function(t){return new(t||i)(y(fe),y(Ne),y(xe),y(Dn,8))};static \u0275dir=Oe({type:i,selectors:[["","ngxSliderLabel",""]],features:[Rt]})}return i})(),Mr=(()=>{class i{template;tooltip;placement;content;static \u0275fac=function(t){return new(t||i)};static \u0275cmp=T({type:i,selectors:[["ngx-slider-tooltip-wrapper"]],inputs:{template:"template",tooltip:"tooltip",placement:"placement",content:"content"},decls:2,vars:2,consts:[[4,"ngIf"],[4,"ngTemplateOutlet","ngTemplateOutletContext"],[1,"ngx-slider-inner-tooltip"]],template:function(t,r){t&1&&w(0,mr,2,6,"ng-container",0)(1,ur,3,3,"ng-container",0),t&2&&(u("ngIf",r.template),c(),u("ngIf",!r.template))},dependencies:[$,ot],styles:[".ngx-slider-inner-tooltip[_ngcontent-%COMP%]{height:100%}"]})}return i})(),ri=class{selected=!1;style={};tooltip=null;tooltipPlacement=null;value=null;valueTooltip=null;valueTooltipPlacement=null;legend=null},Tt=class{active=!1;value=0;difference=0;position=0;lowLimit=0;highLimit=0},Ae=class{value;highValue;static compare(n,e){return p.isNullOrUndefined(n)&&p.isNullOrUndefined(e)||p.isNullOrUndefined(n)!==p.isNullOrUndefined(e)?!1:n.value===e.value&&n.highValue===e.highValue}},Et=class extends Ae{forceChange;static compare(n,e){return p.isNullOrUndefined(n)&&p.isNullOrUndefined(e)||p.isNullOrUndefined(n)!==p.isNullOrUndefined(e)?!1:n.value===e.value&&n.highValue===e.highValue&&n.forceChange===e.forceChange}};var Pr={provide:Ni,useExisting:bi(()=>$e),multi:!0},$e=(()=>{class i{renderer;elementRef;changeDetectionRef;zone;allowUnsafeHtmlInSlider;sliderElementNgxSliderClass=!0;value=null;valueChange=new se;highValue=null;highValueChange=new se;options=new Fe;userChangeStart=new se;userChange=new se;userChangeEnd=new se;manualRefreshSubscription;set manualRefresh(e){this.unsubscribeManualRefresh(),this.manualRefreshSubscription=e.subscribe(()=>{setTimeout(()=>this.calculateViewDimensionsAndDetectChanges())})}triggerFocusSubscription;set triggerFocus(e){this.unsubscribeTriggerFocus(),this.triggerFocusSubscription=e.subscribe(t=>{this.focusPointer(t)})}get range(){return!p.isNullOrUndefined(this.value)&&!p.isNullOrUndefined(this.highValue)}initHasRun=!1;inputModelChangeSubject=new Ce;inputModelChangeSubscription=null;outputModelChangeSubject=new Ce;outputModelChangeSubscription=null;viewLowValue=null;viewHighValue=null;viewOptions=new Fe;handleHalfDimension=0;maxHandlePosition=0;currentTrackingPointer=null;currentFocusPointer=null;firstKeyDown=!1;touchId=null;dragging=new Tt;leftOuterSelectionBarElement;rightOuterSelectionBarElement;fullBarElement;selectionBarElement;minHandleElement;maxHandleElement;floorLabelElement;ceilLabelElement;minHandleLabelElement;maxHandleLabelElement;combinedLabelElement;ticksElement;tooltipTemplate;sliderElementVerticalClass=!1;sliderElementAnimateClass=!1;sliderElementWithLegendClass=!1;sliderElementDisabledAttr=null;sliderElementAriaLabel="ngx-slider";barStyle={};minPointerStyle={};maxPointerStyle={};fullBarTransparentClass=!1;selectionBarDraggableClass=!1;ticksUnderValuesClass=!1;get showTicks(){return this.viewOptions.showTicks}intermediateTicks=!1;ticks=[];eventListenerHelper=null;onMoveEventListener=null;onEndEventListener=null;moving=!1;resizeObserver=null;onTouchedCallback=null;onChangeCallback=null;constructor(e,t,r,o,s){this.renderer=e,this.elementRef=t,this.changeDetectionRef=r,this.zone=o,this.allowUnsafeHtmlInSlider=s,this.eventListenerHelper=new Ot(this.renderer)}ngOnInit(){this.viewOptions=new Fe,Object.assign(this.viewOptions,this.options),this.updateDisabledState(),this.updateVerticalState(),this.updateAriaLabel()}ngAfterViewInit(){this.applyOptions(),this.subscribeInputModelChangeSubject(),this.subscribeOutputModelChangeSubject(),this.renormaliseModelValues(),this.viewLowValue=this.modelValueToViewValue(this.value),this.range?this.viewHighValue=this.modelValueToViewValue(this.highValue):this.viewHighValue=null,this.updateVerticalState(),this.manageElementsStyle(),this.updateDisabledState(),this.calculateViewDimensions(),this.addAccessibility(),this.updateCeilLabel(),this.updateFloorLabel(),this.initHandles(),this.manageEventsBindings(),this.updateAriaLabel(),this.subscribeResizeObserver(),this.initHasRun=!0,this.isRefDestroyed()||this.changeDetectionRef.detectChanges()}ngOnChanges(e){!p.isNullOrUndefined(e.options)&&JSON.stringify(e.options.previousValue)!==JSON.stringify(e.options.currentValue)&&this.onChangeOptions(),(!p.isNullOrUndefined(e.value)||!p.isNullOrUndefined(e.highValue))&&this.inputModelChangeSubject.next({value:this.value,highValue:this.highValue,forceChange:!1,internalChange:!1})}ngOnDestroy(){this.unbindEvents(),this.unsubscribeResizeObserver(),this.unsubscribeInputModelChangeSubject(),this.unsubscribeOutputModelChangeSubject(),this.unsubscribeManualRefresh(),this.unsubscribeTriggerFocus()}writeValue(e){e instanceof Array?(this.value=e[0],this.highValue=e[1]):this.value=e,this.inputModelChangeSubject.next({value:this.value,highValue:this.highValue,forceChange:!1,internalChange:!1})}registerOnChange(e){this.onChangeCallback=e}registerOnTouched(e){this.onTouchedCallback=e}setDisabledState(e){this.viewOptions.disabled=e,this.updateDisabledState()}setAriaLabel(e){this.viewOptions.ariaLabel=e,this.updateAriaLabel()}onResize(e){this.calculateViewDimensionsAndDetectChanges()}subscribeInputModelChangeSubject(){this.inputModelChangeSubscription=this.inputModelChangeSubject.pipe(wt(Et.compare),ei(e=>!e.forceChange&&!e.internalChange)).subscribe(e=>this.applyInputModelChange(e))}subscribeOutputModelChangeSubject(){this.outputModelChangeSubscription=this.outputModelChangeSubject.pipe(wt(Et.compare)).subscribe(e=>this.publishOutputModelChange(e))}subscribeResizeObserver(){re.isResizeObserverAvailable()&&(this.resizeObserver=new ResizeObserver(()=>this.calculateViewDimensionsAndDetectChanges()),this.resizeObserver.observe(this.elementRef.nativeElement))}unsubscribeResizeObserver(){re.isResizeObserverAvailable()&&this.resizeObserver!==null&&(this.resizeObserver.disconnect(),this.resizeObserver=null)}unsubscribeOnMove(){p.isNullOrUndefined(this.onMoveEventListener)||(this.eventListenerHelper.detachEventListener(this.onMoveEventListener),this.onMoveEventListener=null)}unsubscribeOnEnd(){p.isNullOrUndefined(this.onEndEventListener)||(this.eventListenerHelper.detachEventListener(this.onEndEventListener),this.onEndEventListener=null)}unsubscribeInputModelChangeSubject(){p.isNullOrUndefined(this.inputModelChangeSubscription)||(this.inputModelChangeSubscription.unsubscribe(),this.inputModelChangeSubscription=null)}unsubscribeOutputModelChangeSubject(){p.isNullOrUndefined(this.outputModelChangeSubscription)||(this.outputModelChangeSubscription.unsubscribe(),this.outputModelChangeSubscription=null)}unsubscribeManualRefresh(){p.isNullOrUndefined(this.manualRefreshSubscription)||(this.manualRefreshSubscription.unsubscribe(),this.manualRefreshSubscription=null)}unsubscribeTriggerFocus(){p.isNullOrUndefined(this.triggerFocusSubscription)||(this.triggerFocusSubscription.unsubscribe(),this.triggerFocusSubscription=null)}getPointerElement(e){return e===f.Min?this.minHandleElement:e===f.Max?this.maxHandleElement:null}getCurrentTrackingValue(){return this.currentTrackingPointer===f.Min?this.viewLowValue:this.currentTrackingPointer===f.Max?this.viewHighValue:null}modelValueToViewValue(e){return p.isNullOrUndefined(e)?NaN:!p.isNullOrUndefined(this.viewOptions.stepsArray)&&!this.viewOptions.bindIndexForStepsArray?p.findStepIndex(+e,this.viewOptions.stepsArray):+e}viewValueToModelValue(e){return!p.isNullOrUndefined(this.viewOptions.stepsArray)&&!this.viewOptions.bindIndexForStepsArray?this.getStepValue(e):e}getStepValue(e){let t=this.viewOptions.stepsArray[e];return p.isNullOrUndefined(t)?NaN:t.value}applyViewChange(){this.value=this.viewValueToModelValue(this.viewLowValue),this.range&&(this.highValue=this.viewValueToModelValue(this.viewHighValue)),this.outputModelChangeSubject.next({value:this.value,highValue:this.highValue,userEventInitiated:!0,forceChange:!1}),this.inputModelChangeSubject.next({value:this.value,highValue:this.highValue,forceChange:!1,internalChange:!0})}applyInputModelChange(e){let t=this.normaliseModelValues(e),r=!Ae.compare(e,t);r&&(this.value=t.value,this.highValue=t.highValue),this.viewLowValue=this.modelValueToViewValue(t.value),this.range?this.viewHighValue=this.modelValueToViewValue(t.highValue):this.viewHighValue=null,this.updateLowHandle(this.valueToPosition(this.viewLowValue)),this.range&&this.updateHighHandle(this.valueToPosition(this.viewHighValue)),this.updateSelectionBar(),this.updateTicksScale(),this.updateAriaAttributes(),this.range&&this.updateCombinedLabel(),this.outputModelChangeSubject.next({value:t.value,highValue:t.highValue,forceChange:r,userEventInitiated:!1})}publishOutputModelChange(e){let t=()=>{this.valueChange.emit(e.value),this.range&&this.highValueChange.emit(e.highValue),p.isNullOrUndefined(this.onChangeCallback)||(this.range?this.onChangeCallback([e.value,e.highValue]):this.onChangeCallback(e.value)),p.isNullOrUndefined(this.onTouchedCallback)||(this.range?this.onTouchedCallback([e.value,e.highValue]):this.onTouchedCallback(e.value))};e.userEventInitiated?(t(),this.userChange.emit(this.getChangeContext())):setTimeout(()=>{t()})}normaliseModelValues(e){let t=new Ae;if(t.value=e.value,t.highValue=e.highValue,!p.isNullOrUndefined(this.viewOptions.stepsArray)){if(this.viewOptions.enforceStepsArray){let r=p.findStepIndex(t.value,this.viewOptions.stepsArray);if(t.value=this.viewOptions.stepsArray[r].value,this.range){let o=p.findStepIndex(t.highValue,this.viewOptions.stepsArray);t.highValue=this.viewOptions.stepsArray[o].value}}return t}if(this.viewOptions.enforceStep&&(t.value=this.roundStep(t.value),this.range&&(t.highValue=this.roundStep(t.highValue))),this.viewOptions.enforceRange&&(t.value=E.clampToRange(t.value,this.viewOptions.floor,this.viewOptions.ceil),this.range&&(t.highValue=E.clampToRange(t.highValue,this.viewOptions.floor,this.viewOptions.ceil)),this.range&&e.value>e.highValue))if(this.viewOptions.noSwitching)t.value=t.highValue;else{let r=e.value;t.value=e.highValue,t.highValue=r}return t}renormaliseModelValues(){let e={value:this.value,highValue:this.highValue},t=this.normaliseModelValues(e);Ae.compare(t,e)||(this.value=t.value,this.highValue=t.highValue,this.outputModelChangeSubject.next({value:this.value,highValue:this.highValue,forceChange:!0,userEventInitiated:!1}))}onChangeOptions(){if(!this.initHasRun)return;let e=this.getOptionsInfluencingEventBindings(this.viewOptions);this.applyOptions();let t=this.getOptionsInfluencingEventBindings(this.viewOptions),r=!p.areArraysEqual(e,t);this.renormaliseModelValues(),this.viewLowValue=this.modelValueToViewValue(this.value),this.range?this.viewHighValue=this.modelValueToViewValue(this.highValue):this.viewHighValue=null,this.resetSlider(r)}applyOptions(){if(this.viewOptions=new Fe,Object.assign(this.viewOptions,this.options),this.viewOptions.draggableRange=this.range&&this.viewOptions.draggableRange,this.viewOptions.draggableRangeOnly=this.range&&this.viewOptions.draggableRangeOnly,this.viewOptions.draggableRangeOnly&&(this.viewOptions.draggableRange=!0),this.viewOptions.showTicks=this.viewOptions.showTicks||this.viewOptions.showTicksValues||!p.isNullOrUndefined(this.viewOptions.ticksArray),this.viewOptions.showTicks&&(!p.isNullOrUndefined(this.viewOptions.tickStep)||!p.isNullOrUndefined(this.viewOptions.ticksArray))&&(this.intermediateTicks=!0),this.viewOptions.showSelectionBar=this.viewOptions.showSelectionBar||this.viewOptions.showSelectionBarEnd||!p.isNullOrUndefined(this.viewOptions.showSelectionBarFromValue),p.isNullOrUndefined(this.viewOptions.stepsArray)?this.applyFloorCeilOptions():this.applyStepsArrayOptions(),p.isNullOrUndefined(this.viewOptions.combineLabels)&&(this.viewOptions.combineLabels=(e,t)=>e+" - "+t),this.viewOptions.logScale&&this.viewOptions.floor===0)throw Error("Can't use floor=0 with logarithmic scale")}applyStepsArrayOptions(){this.viewOptions.floor=0,this.viewOptions.ceil=this.viewOptions.stepsArray.length-1,this.viewOptions.step=1,p.isNullOrUndefined(this.viewOptions.translate)&&(this.viewOptions.translate=e=>this.viewOptions.bindIndexForStepsArray?String(this.getStepValue(e)):String(e))}applyFloorCeilOptions(){if(p.isNullOrUndefined(this.viewOptions.step)?this.viewOptions.step=1:(this.viewOptions.step=+this.viewOptions.step,this.viewOptions.step<=0&&(this.viewOptions.step=1)),p.isNullOrUndefined(this.viewOptions.ceil)||p.isNullOrUndefined(this.viewOptions.floor))throw Error("floor and ceil options must be supplied");this.viewOptions.ceil=+this.viewOptions.ceil,this.viewOptions.floor=+this.viewOptions.floor,p.isNullOrUndefined(this.viewOptions.translate)&&(this.viewOptions.translate=e=>String(e))}resetSlider(e=!0){this.manageElementsStyle(),this.addAccessibility(),this.updateCeilLabel(),this.updateFloorLabel(),e&&(this.unbindEvents(),this.manageEventsBindings()),this.updateDisabledState(),this.updateAriaLabel(),this.calculateViewDimensions(),this.refocusPointerIfNeeded()}focusPointer(e){e!==f.Min&&e!==f.Max&&(e=f.Min),e===f.Min?this.minHandleElement.focus():this.range&&e===f.Max&&this.maxHandleElement.focus()}refocusPointerIfNeeded(){p.isNullOrUndefined(this.currentFocusPointer)||this.getPointerElement(this.currentFocusPointer).focusIfNeeded()}manageElementsStyle(){this.updateScale(),this.floorLabelElement.setAlwaysHide(this.viewOptions.showTicksValues||this.viewOptions.hideLimitLabels),this.ceilLabelElement.setAlwaysHide(this.viewOptions.showTicksValues||this.viewOptions.hideLimitLabels);let e=this.viewOptions.showTicksValues&&!this.intermediateTicks;this.minHandleLabelElement.setAlwaysHide(e||this.viewOptions.hidePointerLabels),this.maxHandleLabelElement.setAlwaysHide(e||!this.range||this.viewOptions.hidePointerLabels),this.combinedLabelElement.setAlwaysHide(e||!this.range||this.viewOptions.hidePointerLabels),this.selectionBarElement.setAlwaysHide(!this.range&&!this.viewOptions.showSelectionBar),this.leftOuterSelectionBarElement.setAlwaysHide(!this.range||!this.viewOptions.showOuterSelectionBars),this.rightOuterSelectionBarElement.setAlwaysHide(!this.range||!this.viewOptions.showOuterSelectionBars),this.fullBarTransparentClass=this.range&&this.viewOptions.showOuterSelectionBars,this.selectionBarDraggableClass=this.viewOptions.draggableRange&&!this.viewOptions.onlyBindHandles,this.ticksUnderValuesClass=this.intermediateTicks&&this.options.showTicksValues,this.sliderElementVerticalClass!==this.viewOptions.vertical&&(this.updateVerticalState(),setTimeout(()=>{this.resetSlider()})),this.sliderElementAnimateClass!==this.viewOptions.animate&&setTimeout(()=>{this.sliderElementAnimateClass=this.viewOptions.animate}),this.updateRotate()}manageEventsBindings(){this.viewOptions.disabled||this.viewOptions.readOnly?this.unbindEvents():this.bindEvents()}updateDisabledState(){this.sliderElementDisabledAttr=this.viewOptions.disabled?"disabled":null}updateAriaLabel(){this.sliderElementAriaLabel=this.viewOptions.ariaLabel||"nxg-slider"}updateVerticalState(){this.sliderElementVerticalClass=this.viewOptions.vertical;for(let e of this.getAllSliderElements())p.isNullOrUndefined(e)||e.setVertical(this.viewOptions.vertical)}updateScale(){for(let e of this.getAllSliderElements())e.setScale(this.viewOptions.scale)}updateRotate(){for(let e of this.getAllSliderElements())e.setRotate(this.viewOptions.rotate)}getAllSliderElements(){return[this.leftOuterSelectionBarElement,this.rightOuterSelectionBarElement,this.fullBarElement,this.selectionBarElement,this.minHandleElement,this.maxHandleElement,this.floorLabelElement,this.ceilLabelElement,this.minHandleLabelElement,this.maxHandleLabelElement,this.combinedLabelElement,this.ticksElement]}initHandles(){this.updateLowHandle(this.valueToPosition(this.viewLowValue)),this.range&&this.updateHighHandle(this.valueToPosition(this.viewHighValue)),this.updateSelectionBar(),this.range&&this.updateCombinedLabel(),this.updateTicksScale()}addAccessibility(){this.updateAriaAttributes(),this.minHandleElement.role="slider",this.viewOptions.keyboardSupport&&!(this.viewOptions.readOnly||this.viewOptions.disabled)?this.minHandleElement.tabindex="0":this.minHandleElement.tabindex="",this.minHandleElement.ariaOrientation=this.viewOptions.vertical||this.viewOptions.rotate!==0?"vertical":"horizontal",p.isNullOrUndefined(this.viewOptions.ariaLabel)?p.isNullOrUndefined(this.viewOptions.ariaLabelledBy)||(this.minHandleElement.ariaLabelledBy=this.viewOptions.ariaLabelledBy):this.minHandleElement.ariaLabel=this.viewOptions.ariaLabel,this.range&&(this.maxHandleElement.role="slider",this.viewOptions.keyboardSupport&&!(this.viewOptions.readOnly||this.viewOptions.disabled)?this.maxHandleElement.tabindex="0":this.maxHandleElement.tabindex="",this.maxHandleElement.ariaOrientation=this.viewOptions.vertical||this.viewOptions.rotate!==0?"vertical":"horizontal",p.isNullOrUndefined(this.viewOptions.ariaLabelHigh)?p.isNullOrUndefined(this.viewOptions.ariaLabelledByHigh)||(this.maxHandleElement.ariaLabelledBy=this.viewOptions.ariaLabelledByHigh):this.maxHandleElement.ariaLabel=this.viewOptions.ariaLabelHigh)}updateAriaAttributes(){this.minHandleElement.ariaValueNow=(+this.value).toString(),this.minHandleElement.ariaValueText=this.viewOptions.translate(+this.value,ne.Low),this.minHandleElement.ariaValueMin=this.viewOptions.floor.toString(),this.minHandleElement.ariaValueMax=this.viewOptions.ceil.toString(),this.range&&(this.maxHandleElement.ariaValueNow=(+this.highValue).toString(),this.maxHandleElement.ariaValueText=this.viewOptions.translate(+this.highValue,ne.High),this.maxHandleElement.ariaValueMin=this.viewOptions.floor.toString(),this.maxHandleElement.ariaValueMax=this.viewOptions.ceil.toString())}calculateViewDimensions(){p.isNullOrUndefined(this.viewOptions.handleDimension)?this.minHandleElement.calculateDimension():this.minHandleElement.setDimension(this.viewOptions.handleDimension);let e=this.minHandleElement.dimension;this.handleHalfDimension=e/2,p.isNullOrUndefined(this.viewOptions.barDimension)?this.fullBarElement.calculateDimension():this.fullBarElement.setDimension(this.viewOptions.barDimension),this.maxHandlePosition=this.fullBarElement.dimension-e,this.initHasRun&&(this.updateFloorLabel(),this.updateCeilLabel(),this.initHandles())}calculateViewDimensionsAndDetectChanges(){this.calculateViewDimensions(),this.isRefDestroyed()||this.changeDetectionRef.detectChanges()}isRefDestroyed(){return this.changeDetectionRef.destroyed}updateTicksScale(){if(!this.viewOptions.showTicks&&this.sliderElementWithLegendClass){setTimeout(()=>{this.sliderElementWithLegendClass=!1});return}let e=p.isNullOrUndefined(this.viewOptions.ticksArray)?this.getTicksArray():this.viewOptions.ticksArray,t=this.viewOptions.vertical?"translateY":"translateX";this.viewOptions.rightToLeft&&e.reverse();let r=p.isNullOrUndefined(this.viewOptions.tickValueStep)?p.isNullOrUndefined(this.viewOptions.tickStep)?this.viewOptions.step:this.viewOptions.tickStep:this.viewOptions.tickValueStep,o=!1,s=e.map(d=>{let h=this.valueToPosition(d);this.viewOptions.vertical&&(h=this.maxHandlePosition-h);let g=t+"("+Math.round(h)+"px)",x=new ri;x.selected=this.isTickSelected(d),x.style={"-webkit-transform":g,"-moz-transform":g,"-o-transform":g,"-ms-transform":g,transform:g},x.selected&&!p.isNullOrUndefined(this.viewOptions.getSelectionBarColor)&&(x.style["background-color"]=this.getSelectionBarColor()),!x.selected&&!p.isNullOrUndefined(this.viewOptions.getTickColor)&&(x.style["background-color"]=this.getTickColor(d)),p.isNullOrUndefined(this.viewOptions.ticksTooltip)||(x.tooltip=this.viewOptions.ticksTooltip(d),x.tooltipPlacement=this.viewOptions.vertical?"right":"top"),this.viewOptions.showTicksValues&&!p.isNullOrUndefined(r)&&E.isModuloWithinPrecisionLimit(d,r,this.viewOptions.precisionLimit)&&(x.value=this.getDisplayValue(d,ne.TickValue),p.isNullOrUndefined(this.viewOptions.ticksValuesTooltip)||(x.valueTooltip=this.viewOptions.ticksValuesTooltip(d),x.valueTooltipPlacement=this.viewOptions.vertical?"right":"top"));let L=null;if(p.isNullOrUndefined(this.viewOptions.stepsArray))p.isNullOrUndefined(this.viewOptions.getLegend)||(L=this.viewOptions.getLegend(d));else{let k=this.viewOptions.stepsArray[d];p.isNullOrUndefined(this.viewOptions.getStepLegend)?p.isNullOrUndefined(k)||(L=k.legend):L=this.viewOptions.getStepLegend(k)}return p.isNullOrUndefined(L)||(x.legend=L,o=!0),x});if(this.sliderElementWithLegendClass!==o&&setTimeout(()=>{this.sliderElementWithLegendClass=o}),!p.isNullOrUndefined(this.ticks)&&this.ticks.length===s.length)for(let d=0;d<s.length;++d)Object.assign(this.ticks[d],s[d]);else this.ticks=s,this.isRefDestroyed()||this.changeDetectionRef.detectChanges()}getTicksArray(){if(!this.viewOptions.showTicks)return[];let e=p.isNullOrUndefined(this.viewOptions.tickStep)?this.viewOptions.step:this.viewOptions.tickStep,t=[],r=1+Math.floor(E.roundToPrecisionLimit(Math.abs(this.viewOptions.ceil-this.viewOptions.floor)/e,this.viewOptions.precisionLimit));for(let o=0;o<r;++o)t.push(E.roundToPrecisionLimit(this.viewOptions.floor+e*o,this.viewOptions.precisionLimit));return t}isTickSelected(e){if(!this.range)if(p.isNullOrUndefined(this.viewOptions.showSelectionBarFromValue)){if(this.viewOptions.showSelectionBarEnd){if(e>=this.viewLowValue)return!0}else if(this.viewOptions.showSelectionBar&&e<=this.viewLowValue)return!0}else{let t=this.viewOptions.showSelectionBarFromValue;if(this.viewLowValue>t&&e>=t&&e<=this.viewLowValue)return!0;if(this.viewLowValue<t&&e<=t&&e>=this.viewLowValue)return!0}return!!(this.range&&e>=this.viewLowValue&&e<=this.viewHighValue)}updateFloorLabel(){if(!this.floorLabelElement.alwaysHide){this.floorLabelElement.setValue(this.getDisplayValue(this.viewOptions.floor,ne.Floor)),this.floorLabelElement.calculateDimension();let e=this.viewOptions.rightToLeft?this.fullBarElement.dimension-this.floorLabelElement.dimension:0;this.floorLabelElement.setPosition(e)}}updateCeilLabel(){if(!this.ceilLabelElement.alwaysHide){this.ceilLabelElement.setValue(this.getDisplayValue(this.viewOptions.ceil,ne.Ceil)),this.ceilLabelElement.calculateDimension();let e=this.viewOptions.rightToLeft?0:this.fullBarElement.dimension-this.ceilLabelElement.dimension;this.ceilLabelElement.setPosition(e)}}updateHandles(e,t){e===f.Min?this.updateLowHandle(t):e===f.Max&&this.updateHighHandle(t),this.updateSelectionBar(),this.updateTicksScale(),this.range&&this.updateCombinedLabel()}getHandleLabelPos(e,t){let r=e===f.Min?this.minHandleLabelElement.dimension:this.maxHandleLabelElement.dimension,o=t-r/2+this.handleHalfDimension,s=this.fullBarElement.dimension-r;return this.viewOptions.boundPointerLabels?this.viewOptions.rightToLeft&&e===f.Min||!this.viewOptions.rightToLeft&&e===f.Max?Math.min(o,s):Math.min(Math.max(o,0),s):o}updateLowHandle(e){this.minHandleElement.setPosition(e),this.minHandleLabelElement.setValue(this.getDisplayValue(this.viewLowValue,ne.Low)),this.minHandleLabelElement.setPosition(this.getHandleLabelPos(f.Min,e)),p.isNullOrUndefined(this.viewOptions.getPointerColor)||(this.minPointerStyle={backgroundColor:this.getPointerColor(f.Min)}),this.viewOptions.autoHideLimitLabels&&this.updateFloorAndCeilLabelsVisibility()}updateHighHandle(e){this.maxHandleElement.setPosition(e),this.maxHandleLabelElement.setValue(this.getDisplayValue(this.viewHighValue,ne.High)),this.maxHandleLabelElement.setPosition(this.getHandleLabelPos(f.Max,e)),p.isNullOrUndefined(this.viewOptions.getPointerColor)||(this.maxPointerStyle={backgroundColor:this.getPointerColor(f.Max)}),this.viewOptions.autoHideLimitLabels&&this.updateFloorAndCeilLabelsVisibility()}updateFloorAndCeilLabelsVisibility(){if(this.viewOptions.hidePointerLabels)return;let e=!1,t=!1,r=this.isLabelBelowFloorLabel(this.minHandleLabelElement),o=this.isLabelAboveCeilLabel(this.minHandleLabelElement),s=this.isLabelAboveCeilLabel(this.maxHandleLabelElement),d=this.isLabelBelowFloorLabel(this.combinedLabelElement),h=this.isLabelAboveCeilLabel(this.combinedLabelElement);if(r?(e=!0,this.floorLabelElement.hide()):(e=!1,this.floorLabelElement.show()),o?(t=!0,this.ceilLabelElement.hide()):(t=!1,this.ceilLabelElement.show()),this.range){let g=this.combinedLabelElement.isVisible()?h:s,x=this.combinedLabelElement.isVisible()?d:r;g?this.ceilLabelElement.hide():t||this.ceilLabelElement.show(),x?this.floorLabelElement.hide():e||this.floorLabelElement.show()}}isLabelBelowFloorLabel(e){let t=e.position,r=e.dimension,o=this.floorLabelElement.position,s=this.floorLabelElement.dimension;return this.viewOptions.rightToLeft?t+r>=o-2:t<=o+s+2}isLabelAboveCeilLabel(e){let t=e.position,r=e.dimension,o=this.ceilLabelElement.position,s=this.ceilLabelElement.dimension;return this.viewOptions.rightToLeft?t<=o+s+2:t+r>=o-2}updateSelectionBar(){let e=0,t=0,r=this.viewOptions.rightToLeft?!this.viewOptions.showSelectionBarEnd:this.viewOptions.showSelectionBarEnd,o=this.viewOptions.rightToLeft?this.maxHandleElement.position+this.handleHalfDimension:this.minHandleElement.position+this.handleHalfDimension;if(this.range)t=Math.abs(this.maxHandleElement.position-this.minHandleElement.position),e=o;else if(p.isNullOrUndefined(this.viewOptions.showSelectionBarFromValue))r?(t=Math.ceil(Math.abs(this.maxHandlePosition-this.minHandleElement.position)+this.handleHalfDimension),e=Math.floor(this.minHandleElement.position+this.handleHalfDimension)):(t=this.minHandleElement.position+this.handleHalfDimension,e=0);else{let s=this.viewOptions.showSelectionBarFromValue,d=this.valueToPosition(s);(this.viewOptions.rightToLeft?this.viewLowValue<=s:this.viewLowValue>s)?(t=this.minHandleElement.position-d,e=d+this.handleHalfDimension):(t=d-this.minHandleElement.position,e=this.minHandleElement.position+this.handleHalfDimension)}if(this.selectionBarElement.setDimension(t),this.selectionBarElement.setPosition(e),this.range&&this.viewOptions.showOuterSelectionBars&&(this.viewOptions.rightToLeft?(this.rightOuterSelectionBarElement.setDimension(e),this.rightOuterSelectionBarElement.setPosition(0),this.fullBarElement.calculateDimension(),this.leftOuterSelectionBarElement.setDimension(this.fullBarElement.dimension-(e+t)),this.leftOuterSelectionBarElement.setPosition(e+t)):(this.leftOuterSelectionBarElement.setDimension(e),this.leftOuterSelectionBarElement.setPosition(0),this.fullBarElement.calculateDimension(),this.rightOuterSelectionBarElement.setDimension(this.fullBarElement.dimension-(e+t)),this.rightOuterSelectionBarElement.setPosition(e+t))),p.isNullOrUndefined(this.viewOptions.getSelectionBarColor)){if(!p.isNullOrUndefined(this.viewOptions.selectionBarGradient)){let s=p.isNullOrUndefined(this.viewOptions.showSelectionBarFromValue)?0:this.valueToPosition(this.viewOptions.showSelectionBarFromValue),d=s-e>0&&!r||s-e<=0&&r,h=this.viewOptions.vertical?d?"bottom":"top":d?"left":"right";this.barStyle={backgroundImage:"linear-gradient(to "+h+", "+this.viewOptions.selectionBarGradient.from+" 0%,"+this.viewOptions.selectionBarGradient.to+" 100%)"},this.viewOptions.vertical?(this.barStyle.backgroundPosition="center "+(s+t+e+(d?-this.handleHalfDimension:0))+"px",this.barStyle.backgroundSize="100% "+(this.fullBarElement.dimension-this.handleHalfDimension)+"px"):(this.barStyle.backgroundPosition=s-e+(d?this.handleHalfDimension:0)+"px center",this.barStyle.backgroundSize=this.fullBarElement.dimension-this.handleHalfDimension+"px 100%")}}else{let s=this.getSelectionBarColor();this.barStyle={backgroundColor:s}}}getSelectionBarColor(){return this.range?this.viewOptions.getSelectionBarColor(this.value,this.highValue):this.viewOptions.getSelectionBarColor(this.value)}getPointerColor(e){return e===f.Max?this.viewOptions.getPointerColor(this.highValue,e):this.viewOptions.getPointerColor(this.value,e)}getTickColor(e){return this.viewOptions.getTickColor(e)}updateCombinedLabel(){let e=null;if(this.viewOptions.rightToLeft?e=this.minHandleLabelElement.position-this.minHandleLabelElement.dimension-10<=this.maxHandleLabelElement.position:e=this.minHandleLabelElement.position+this.minHandleLabelElement.dimension+10>=this.maxHandleLabelElement.position,e){let t=this.getDisplayValue(this.viewLowValue,ne.Low),r=this.getDisplayValue(this.viewHighValue,ne.High),o=this.viewOptions.rightToLeft?this.viewOptions.combineLabels(r,t):this.viewOptions.combineLabels(t,r);this.combinedLabelElement.setValue(o);let s=this.viewOptions.boundPointerLabels?Math.min(Math.max(this.selectionBarElement.position+this.selectionBarElement.dimension/2-this.combinedLabelElement.dimension/2,0),this.fullBarElement.dimension-this.combinedLabelElement.dimension):this.selectionBarElement.position+this.selectionBarElement.dimension/2-this.combinedLabelElement.dimension/2;this.combinedLabelElement.setPosition(s),this.minHandleLabelElement.hide(),this.maxHandleLabelElement.hide(),this.combinedLabelElement.show()}else this.updateHighHandle(this.valueToPosition(this.viewHighValue)),this.updateLowHandle(this.valueToPosition(this.viewLowValue)),this.maxHandleLabelElement.show(),this.minHandleLabelElement.show(),this.combinedLabelElement.hide();this.viewOptions.autoHideLimitLabels&&this.updateFloorAndCeilLabelsVisibility()}getDisplayValue(e,t){return!p.isNullOrUndefined(this.viewOptions.stepsArray)&&!this.viewOptions.bindIndexForStepsArray&&(e=this.getStepValue(e)),this.viewOptions.translate(e,t)}roundStep(e,t){let r=p.isNullOrUndefined(t)?this.viewOptions.step:t,o=E.roundToPrecisionLimit((e-this.viewOptions.floor)/r,this.viewOptions.precisionLimit);return o=Math.round(o)*r,E.roundToPrecisionLimit(this.viewOptions.floor+o,this.viewOptions.precisionLimit)}valueToPosition(e){let t=p.linearValueToPosition;p.isNullOrUndefined(this.viewOptions.customValueToPosition)?this.viewOptions.logScale&&(t=p.logValueToPosition):t=this.viewOptions.customValueToPosition,e=E.clampToRange(e,this.viewOptions.floor,this.viewOptions.ceil);let r=t(e,this.viewOptions.floor,this.viewOptions.ceil);return p.isNullOrUndefined(r)&&(r=0),this.viewOptions.rightToLeft&&(r=1-r),r*this.maxHandlePosition}positionToValue(e){let t=e/this.maxHandlePosition;this.viewOptions.rightToLeft&&(t=1-t);let r=p.linearPositionToValue;p.isNullOrUndefined(this.viewOptions.customPositionToValue)?this.viewOptions.logScale&&(r=p.logPositionToValue):r=this.viewOptions.customPositionToValue;let o=r(t,this.viewOptions.floor,this.viewOptions.ceil);return p.isNullOrUndefined(o)?0:o}getEventXY(e,t){if(e instanceof MouseEvent)return this.viewOptions.vertical||this.viewOptions.rotate!==0?e.clientY:e.clientX;let r=0,o=e.touches;if(!p.isNullOrUndefined(t)){for(let s=0;s<o.length;s++)if(o[s].identifier===t){r=s;break}}return this.viewOptions.vertical||this.viewOptions.rotate!==0?o[r].clientY:o[r].clientX}getEventPosition(e,t){let r=this.elementRef.nativeElement.getBoundingClientRect(),o=this.viewOptions.vertical||this.viewOptions.rotate!==0?r.bottom:r.left,s=0;return this.viewOptions.vertical||this.viewOptions.rotate!==0?s=-this.getEventXY(e,t)+o:s=this.getEventXY(e,t)-o,s*this.viewOptions.scale-this.handleHalfDimension}getNearestHandle(e){if(!this.range)return f.Min;let t=this.getEventPosition(e),r=Math.abs(t-this.minHandleElement.position),o=Math.abs(t-this.maxHandleElement.position);return r<o?f.Min:r>o?f.Max:this.viewOptions.rightToLeft?t>this.minHandleElement.position?f.Min:f.Max:t<this.minHandleElement.position?f.Min:f.Max}bindEvents(){let e=this.viewOptions.draggableRange;this.viewOptions.onlyBindHandles||this.selectionBarElement.on("mousedown",t=>this.onBarStart(null,e,t,!0,!0,!0)),this.viewOptions.draggableRangeOnly?(this.minHandleElement.on("mousedown",t=>this.onBarStart(f.Min,e,t,!0,!0)),this.maxHandleElement.on("mousedown",t=>this.onBarStart(f.Max,e,t,!0,!0))):(this.minHandleElement.on("mousedown",t=>this.onStart(f.Min,t,!0,!0)),this.range&&this.maxHandleElement.on("mousedown",t=>this.onStart(f.Max,t,!0,!0)),this.viewOptions.onlyBindHandles||(this.fullBarElement.on("mousedown",t=>this.onStart(null,t,!0,!0,!0)),this.ticksElement.on("mousedown",t=>this.onStart(null,t,!0,!0,!0,!0)))),this.viewOptions.onlyBindHandles||this.selectionBarElement.onPassive("touchstart",t=>this.onBarStart(null,e,t,!0,!0,!0)),this.viewOptions.draggableRangeOnly?(this.minHandleElement.onPassive("touchstart",t=>this.onBarStart(f.Min,e,t,!0,!0)),this.maxHandleElement.onPassive("touchstart",t=>this.onBarStart(f.Max,e,t,!0,!0))):(this.minHandleElement.onPassive("touchstart",t=>this.onStart(f.Min,t,!0,!0)),this.range&&this.maxHandleElement.onPassive("touchstart",t=>this.onStart(f.Max,t,!0,!0)),this.viewOptions.onlyBindHandles||(this.fullBarElement.onPassive("touchstart",t=>this.onStart(null,t,!0,!0,!0)),this.ticksElement.onPassive("touchstart",t=>this.onStart(null,t,!1,!1,!0,!0)))),this.viewOptions.keyboardSupport&&(this.minHandleElement.on("focus",()=>this.onPointerFocus(f.Min)),this.range&&this.maxHandleElement.on("focus",()=>this.onPointerFocus(f.Max)))}getOptionsInfluencingEventBindings(e){return[e.disabled,e.readOnly,e.draggableRange,e.draggableRangeOnly,e.onlyBindHandles,e.keyboardSupport]}unbindEvents(){this.unsubscribeOnMove(),this.unsubscribeOnEnd();for(let e of this.getAllSliderElements())p.isNullOrUndefined(e)||e.off()}onBarStart(e,t,r,o,s,d,h){t?this.onDragStart(e,r,o,s):this.onStart(e,r,o,s,d,h)}onStart(e,t,r,o,s,d){t.stopPropagation(),!re.isTouchEvent(t)&&!Ct&&t.preventDefault(),this.moving=!1,this.calculateViewDimensions(),p.isNullOrUndefined(e)&&(e=this.getNearestHandle(t)),this.currentTrackingPointer=e;let h=this.getPointerElement(e);if(h.active=!0,this.viewOptions.keyboardSupport&&h.focus(),r){this.unsubscribeOnMove();let g=x=>this.dragging.active?this.onDragMove(x):this.onMove(x);re.isTouchEvent(t)?this.onMoveEventListener=this.eventListenerHelper.attachPassiveEventListener(document,"touchmove",g):this.onMoveEventListener=this.eventListenerHelper.attachEventListener(document,"mousemove",g)}if(o){this.unsubscribeOnEnd();let g=x=>this.onEnd(x);re.isTouchEvent(t)?this.onEndEventListener=this.eventListenerHelper.attachPassiveEventListener(document,"touchend",g):this.onEndEventListener=this.eventListenerHelper.attachEventListener(document,"mouseup",g)}this.userChangeStart.emit(this.getChangeContext()),re.isTouchEvent(t)&&!p.isNullOrUndefined(t.changedTouches)&&p.isNullOrUndefined(this.touchId)&&(this.touchId=t.changedTouches[0].identifier),s&&this.onMove(t,!0),d&&this.onEnd(t)}onMove(e,t){let r=null;if(re.isTouchEvent(e)){let g=e.changedTouches;for(let x=0;x<g.length;x++)if(g[x].identifier===this.touchId){r=g[x];break}if(p.isNullOrUndefined(r))return}this.viewOptions.animate&&!this.viewOptions.animateOnMove&&this.moving&&(this.sliderElementAnimateClass=!1),this.moving=!0;let o=p.isNullOrUndefined(r)?this.getEventPosition(e):this.getEventPosition(e,r.identifier),s,d=this.viewOptions.rightToLeft?this.viewOptions.floor:this.viewOptions.ceil,h=this.viewOptions.rightToLeft?this.viewOptions.ceil:this.viewOptions.floor;o<=0?s=h:o>=this.maxHandlePosition?s=d:(s=this.positionToValue(o),t&&!p.isNullOrUndefined(this.viewOptions.tickStep)?s=this.roundStep(s,this.viewOptions.tickStep):s=this.roundStep(s)),this.positionTrackingHandle(s)}onEnd(e){re.isTouchEvent(e)&&e.changedTouches[0].identifier!==this.touchId||(this.moving=!1,this.viewOptions.animate&&(this.sliderElementAnimateClass=!0),this.touchId=null,this.viewOptions.keyboardSupport||(this.minHandleElement.active=!1,this.maxHandleElement.active=!1,this.currentTrackingPointer=null),this.dragging.active=!1,this.unsubscribeOnMove(),this.unsubscribeOnEnd(),this.userChangeEnd.emit(this.getChangeContext()))}onPointerFocus(e){let t=this.getPointerElement(e);t.on("blur",()=>this.onPointerBlur(t)),t.on("keydown",r=>this.onKeyboardEvent(r)),t.on("keyup",()=>this.onKeyUp()),t.active=!0,this.currentTrackingPointer=e,this.currentFocusPointer=e,this.firstKeyDown=!0}onKeyUp(){this.firstKeyDown=!0,this.userChangeEnd.emit(this.getChangeContext())}onPointerBlur(e){e.off("blur"),e.off("keydown"),e.off("keyup"),e.active=!1,p.isNullOrUndefined(this.touchId)&&(this.currentTrackingPointer=null,this.currentFocusPointer=null)}getKeyActions(e){let t=this.viewOptions.ceil-this.viewOptions.floor,r=e+this.viewOptions.step,o=e-this.viewOptions.step,s=e+t/10,d=e-t/10;this.viewOptions.reversedControls&&(r=e-this.viewOptions.step,o=e+this.viewOptions.step,s=e-t/10,d=e+t/10);let h={UP:r,DOWN:o,LEFT:o,RIGHT:r,PAGEUP:s,PAGEDOWN:d,HOME:this.viewOptions.reversedControls?this.viewOptions.ceil:this.viewOptions.floor,END:this.viewOptions.reversedControls?this.viewOptions.floor:this.viewOptions.ceil};return this.viewOptions.rightToLeft&&(h.LEFT=r,h.RIGHT=o,(this.viewOptions.vertical||this.viewOptions.rotate!==0)&&(h.UP=o,h.DOWN=r)),h}onKeyboardEvent(e){let t=this.getCurrentTrackingValue(),r=p.isNullOrUndefined(e.keyCode)?e.which:e.keyCode,o={38:"UP",40:"DOWN",37:"LEFT",39:"RIGHT",33:"PAGEUP",34:"PAGEDOWN",36:"HOME",35:"END"},s=this.getKeyActions(t),d=o[r],h=s[d];if(p.isNullOrUndefined(h)||p.isNullOrUndefined(this.currentTrackingPointer))return;e.preventDefault(),this.firstKeyDown&&(this.firstKeyDown=!1,this.userChangeStart.emit(this.getChangeContext()));let g=E.clampToRange(h,this.viewOptions.floor,this.viewOptions.ceil),x=this.roundStep(g);if(!this.viewOptions.draggableRangeOnly)this.positionTrackingHandle(x);else{let L=this.viewHighValue-this.viewLowValue,k,H;this.currentTrackingPointer===f.Min?(k=x,H=x+L,H>this.viewOptions.ceil&&(H=this.viewOptions.ceil,k=H-L)):this.currentTrackingPointer===f.Max&&(H=x,k=x-L,k<this.viewOptions.floor&&(k=this.viewOptions.floor,H=k+L)),this.positionTrackingBar(k,H)}}onDragStart(e,t,r,o){let s=this.getEventPosition(t);this.dragging=new Tt,this.dragging.active=!0,this.dragging.value=this.positionToValue(s),this.dragging.difference=this.viewHighValue-this.viewLowValue,this.dragging.lowLimit=this.viewOptions.rightToLeft?this.minHandleElement.position-s:s-this.minHandleElement.position,this.dragging.highLimit=this.viewOptions.rightToLeft?s-this.maxHandleElement.position:this.maxHandleElement.position-s,this.onStart(e,t,r,o)}getMinValue(e,t,r){let o=this.viewOptions.rightToLeft,s=null;return t?r?s=o?this.viewOptions.floor:this.viewOptions.ceil-this.dragging.difference:s=o?this.viewOptions.ceil-this.dragging.difference:this.viewOptions.floor:s=o?this.positionToValue(e+this.dragging.lowLimit):this.positionToValue(e-this.dragging.lowLimit),this.roundStep(s)}getMaxValue(e,t,r){let o=this.viewOptions.rightToLeft,s=null;return t?r?s=o?this.viewOptions.floor+this.dragging.difference:this.viewOptions.ceil:s=o?this.viewOptions.ceil:this.viewOptions.floor+this.dragging.difference:o?s=this.positionToValue(e+this.dragging.lowLimit)+this.dragging.difference:s=this.positionToValue(e-this.dragging.lowLimit)+this.dragging.difference,this.roundStep(s)}onDragMove(e){let t=this.getEventPosition(e);this.viewOptions.animate&&!this.viewOptions.animateOnMove&&this.moving&&(this.sliderElementAnimateClass=!1),this.moving=!0;let r,o,s,d;this.viewOptions.rightToLeft?(r=this.dragging.lowLimit,o=this.dragging.highLimit,s=this.maxHandleElement,d=this.minHandleElement):(r=this.dragging.highLimit,o=this.dragging.lowLimit,s=this.minHandleElement,d=this.maxHandleElement);let h=t<=o,g=t>=this.maxHandlePosition-r,x,L;if(h){if(s.position===0)return;x=this.getMinValue(t,!0,!1),L=this.getMaxValue(t,!0,!1)}else if(g){if(d.position===this.maxHandlePosition)return;L=this.getMaxValue(t,!0,!0),x=this.getMinValue(t,!0,!0)}else x=this.getMinValue(t,!1,!1),L=this.getMaxValue(t,!1,!1);this.positionTrackingBar(x,L)}positionTrackingBar(e,t){!p.isNullOrUndefined(this.viewOptions.minLimit)&&e<this.viewOptions.minLimit&&(e=this.viewOptions.minLimit,t=E.roundToPrecisionLimit(e+this.dragging.difference,this.viewOptions.precisionLimit)),!p.isNullOrUndefined(this.viewOptions.maxLimit)&&t>this.viewOptions.maxLimit&&(t=this.viewOptions.maxLimit,e=E.roundToPrecisionLimit(t-this.dragging.difference,this.viewOptions.precisionLimit)),this.viewLowValue=e,this.viewHighValue=t,this.applyViewChange(),this.updateHandles(f.Min,this.valueToPosition(e)),this.updateHandles(f.Max,this.valueToPosition(t))}positionTrackingHandle(e){e=this.applyMinMaxLimit(e),this.range&&(this.viewOptions.pushRange?e=this.applyPushRange(e):(this.viewOptions.noSwitching&&(this.currentTrackingPointer===f.Min&&e>this.viewHighValue?e=this.applyMinMaxRange(this.viewHighValue):this.currentTrackingPointer===f.Max&&e<this.viewLowValue&&(e=this.applyMinMaxRange(this.viewLowValue))),e=this.applyMinMaxRange(e),this.currentTrackingPointer===f.Min&&e>this.viewHighValue?(this.viewLowValue=this.viewHighValue,this.applyViewChange(),this.updateHandles(f.Min,this.maxHandleElement.position),this.updateAriaAttributes(),this.currentTrackingPointer=f.Max,this.minHandleElement.active=!1,this.maxHandleElement.active=!0,this.viewOptions.keyboardSupport&&this.maxHandleElement.focus()):this.currentTrackingPointer===f.Max&&e<this.viewLowValue&&(this.viewHighValue=this.viewLowValue,this.applyViewChange(),this.updateHandles(f.Max,this.minHandleElement.position),this.updateAriaAttributes(),this.currentTrackingPointer=f.Min,this.maxHandleElement.active=!1,this.minHandleElement.active=!0,this.viewOptions.keyboardSupport&&this.minHandleElement.focus()))),this.getCurrentTrackingValue()!==e&&(this.currentTrackingPointer===f.Min?(this.viewLowValue=e,this.applyViewChange()):this.currentTrackingPointer===f.Max&&(this.viewHighValue=e,this.applyViewChange()),this.updateHandles(this.currentTrackingPointer,this.valueToPosition(e)),this.updateAriaAttributes())}applyMinMaxLimit(e){return!p.isNullOrUndefined(this.viewOptions.minLimit)&&e<this.viewOptions.minLimit?this.viewOptions.minLimit:!p.isNullOrUndefined(this.viewOptions.maxLimit)&&e>this.viewOptions.maxLimit?this.viewOptions.maxLimit:e}applyMinMaxRange(e){let t=this.currentTrackingPointer===f.Min?this.viewHighValue:this.viewLowValue,r=Math.abs(e-t);if(!p.isNullOrUndefined(this.viewOptions.minRange)&&r<this.viewOptions.minRange){if(this.currentTrackingPointer===f.Min)return E.roundToPrecisionLimit(this.viewHighValue-this.viewOptions.minRange,this.viewOptions.precisionLimit);if(this.currentTrackingPointer===f.Max)return E.roundToPrecisionLimit(this.viewLowValue+this.viewOptions.minRange,this.viewOptions.precisionLimit)}if(!p.isNullOrUndefined(this.viewOptions.maxRange)&&r>this.viewOptions.maxRange){if(this.currentTrackingPointer===f.Min)return E.roundToPrecisionLimit(this.viewHighValue-this.viewOptions.maxRange,this.viewOptions.precisionLimit);if(this.currentTrackingPointer===f.Max)return E.roundToPrecisionLimit(this.viewLowValue+this.viewOptions.maxRange,this.viewOptions.precisionLimit)}return e}applyPushRange(e){let t=this.currentTrackingPointer===f.Min?this.viewHighValue-e:e-this.viewLowValue,r=p.isNullOrUndefined(this.viewOptions.minRange)?this.viewOptions.step:this.viewOptions.minRange,o=this.viewOptions.maxRange;return t<r?(this.currentTrackingPointer===f.Min?(this.viewHighValue=E.roundToPrecisionLimit(Math.min(e+r,this.viewOptions.ceil),this.viewOptions.precisionLimit),e=E.roundToPrecisionLimit(this.viewHighValue-r,this.viewOptions.precisionLimit),this.applyViewChange(),this.updateHandles(f.Max,this.valueToPosition(this.viewHighValue))):this.currentTrackingPointer===f.Max&&(this.viewLowValue=E.roundToPrecisionLimit(Math.max(e-r,this.viewOptions.floor),this.viewOptions.precisionLimit),e=E.roundToPrecisionLimit(this.viewLowValue+r,this.viewOptions.precisionLimit),this.applyViewChange(),this.updateHandles(f.Min,this.valueToPosition(this.viewLowValue))),this.updateAriaAttributes()):!p.isNullOrUndefined(o)&&t>o&&(this.currentTrackingPointer===f.Min?(this.viewHighValue=E.roundToPrecisionLimit(e+o,this.viewOptions.precisionLimit),this.applyViewChange(),this.updateHandles(f.Max,this.valueToPosition(this.viewHighValue))):this.currentTrackingPointer===f.Max&&(this.viewLowValue=E.roundToPrecisionLimit(e-o,this.viewOptions.precisionLimit),this.applyViewChange(),this.updateHandles(f.Min,this.valueToPosition(this.viewLowValue))),this.updateAriaAttributes()),e}getChangeContext(){let e=new ni;return e.pointerType=this.currentTrackingPointer,e.value=+this.value,this.range&&(e.highValue=+this.highValue),e}static \u0275fac=function(t){return new(t||i)(y(Ne),y(fe),y(xe),y(et),y(Dn,8))};static \u0275cmp=T({type:i,selectors:[["ngx-slider"]],contentQueries:function(t,r,o){if(t&1&&ki(o,fr,5),t&2){let s;U(s=j())&&(r.tooltipTemplate=s.first)}},viewQuery:function(t,r){if(t&1&&(K(gr,5,me),K(vr,5,me),K(xr,5,me),K(br,5,me),K(wr,5,ii),K(yr,5,ii),K(Sr,5,He),K(Cr,5,He),K(_r,5,He),K(Or,5,He),K(Tr,5,He),K(Er,5,me)),t&2){let o;U(o=j())&&(r.leftOuterSelectionBarElement=o.first),U(o=j())&&(r.rightOuterSelectionBarElement=o.first),U(o=j())&&(r.fullBarElement=o.first),U(o=j())&&(r.selectionBarElement=o.first),U(o=j())&&(r.minHandleElement=o.first),U(o=j())&&(r.maxHandleElement=o.first),U(o=j())&&(r.floorLabelElement=o.first),U(o=j())&&(r.ceilLabelElement=o.first),U(o=j())&&(r.minHandleLabelElement=o.first),U(o=j())&&(r.maxHandleLabelElement=o.first),U(o=j())&&(r.combinedLabelElement=o.first),U(o=j())&&(r.ticksElement=o.first)}},hostVars:10,hostBindings:function(t,r){t&1&&S("resize",function(s){return r.onResize(s)},!1,Di),t&2&&(tt("disabled",r.sliderElementDisabledAttr)("aria-label",r.sliderElementAriaLabel),Te("ngx-slider",r.sliderElementNgxSliderClass)("vertical",r.sliderElementVerticalClass)("animate",r.sliderElementAnimateClass)("with-legend",r.sliderElementWithLegendClass))},inputs:{value:"value",highValue:"highValue",options:"options",manualRefresh:"manualRefresh",triggerFocus:"triggerFocus"},outputs:{valueChange:"valueChange",highValueChange:"highValueChange",userChangeStart:"userChangeStart",userChange:"userChange",userChangeEnd:"userChangeEnd"},features:[Vi([Pr]),Xe],decls:29,vars:13,consts:[["leftOuterSelectionBar",""],["rightOuterSelectionBar",""],["fullBar",""],["selectionBar",""],["minHandle",""],["maxHandle",""],["floorLabel",""],["ceilLabel",""],["minHandleLabel",""],["maxHandleLabel",""],["combinedLabel",""],["ticksElement",""],["ngxSliderElement","",1,"ngx-slider-span","ngx-slider-bar-wrapper","ngx-slider-left-out-selection"],[1,"ngx-slider-span","ngx-slider-bar"],["ngxSliderElement","",1,"ngx-slider-span","ngx-slider-bar-wrapper","ngx-slider-right-out-selection"],["ngxSliderElement","",1,"ngx-slider-span","ngx-slider-bar-wrapper","ngx-slider-full-bar"],["ngxSliderElement","",1,"ngx-slider-span","ngx-slider-bar-wrapper","ngx-slider-selection-bar"],[1,"ngx-slider-span","ngx-slider-bar","ngx-slider-selection",3,"ngStyle"],["ngxSliderHandle","",1,"ngx-slider-span","ngx-slider-pointer","ngx-slider-pointer-min",3,"ngStyle"],["ngxSliderHandle","",1,"ngx-slider-span","ngx-slider-pointer","ngx-slider-pointer-max",3,"ngStyle"],["ngxSliderLabel","",1,"ngx-slider-span","ngx-slider-bubble","ngx-slider-limit","ngx-slider-floor"],["ngxSliderLabel","",1,"ngx-slider-span","ngx-slider-bubble","ngx-slider-limit","ngx-slider-ceil"],["ngxSliderLabel","",1,"ngx-slider-span","ngx-slider-bubble","ngx-slider-model-value"],["ngxSliderLabel","",1,"ngx-slider-span","ngx-slider-bubble","ngx-slider-model-high"],["ngxSliderLabel","",1,"ngx-slider-span","ngx-slider-bubble","ngx-slider-combined"],["ngxSliderElement","",1,"ngx-slider-ticks",3,"hidden"],["class","ngx-slider-tick",3,"ngClass","ngStyle",4,"ngFor","ngForOf"],[1,"ngx-slider-tick",3,"ngClass","ngStyle"],[3,"template","tooltip","placement"],["class","ngx-slider-span ngx-slider-tick-value",3,"template","tooltip","placement","content",4,"ngIf"],["class","ngx-slider-span ngx-slider-tick-legend",3,"innerText",4,"ngIf"],["class","ngx-slider-span ngx-slider-tick-legend",3,"innerHTML",4,"ngIf"],[1,"ngx-slider-span","ngx-slider-tick-value",3,"template","tooltip","placement","content"],[1,"ngx-slider-span","ngx-slider-tick-legend",3,"innerText"],[1,"ngx-slider-span","ngx-slider-tick-legend",3,"innerHTML"]],template:function(t,r){t&1&&(a(0,"span",12,0),v(2,"span",13),l(),a(3,"span",14,1),v(5,"span",13),l(),a(6,"span",15,2),v(8,"span",13),l(),a(9,"span",16,3),v(11,"span",17),l(),v(12,"span",18,4)(14,"span",19,5)(16,"span",20,6)(18,"span",21,7)(20,"span",22,8)(22,"span",23,9)(24,"span",24,10),a(26,"span",25,11),w(28,Vr,5,10,"span",26),l()),t&2&&(c(6),Te("ngx-slider-transparent",r.fullBarTransparentClass),c(3),Te("ngx-slider-draggable",r.selectionBarDraggableClass),c(2),u("ngStyle",r.barStyle),c(),u("ngStyle",r.minPointerStyle),c(2),Nt("display",r.range?"inherit":"none"),u("ngStyle",r.maxPointerStyle),c(12),Te("ngx-slider-ticks-values-under",r.ticksUnderValuesClass),u("hidden",!r.showTicks),c(2),u("ngForOf",r.ticks))},dependencies:[rt,ce,$,Fi,me,ii,He,Mr],styles:['.ngx-slider{display:inline-block;position:relative;height:4px;width:100%;margin:35px 0 15px;vertical-align:middle;-webkit-user-select:none;user-select:none;touch-action:pan-y}  .ngx-slider.with-legend{margin-bottom:40px}  .ngx-slider[disabled]{cursor:not-allowed}  .ngx-slider[disabled] .ngx-slider-pointer{cursor:not-allowed;background-color:#d8e0f3}  .ngx-slider[disabled] .ngx-slider-draggable{cursor:not-allowed}  .ngx-slider[disabled] .ngx-slider-selection{background:#8b91a2}  .ngx-slider[disabled] .ngx-slider-tick{cursor:not-allowed}  .ngx-slider[disabled] .ngx-slider-tick.ngx-slider-selected{background:#8b91a2}  .ngx-slider .ngx-slider-span{white-space:nowrap;position:absolute;display:inline-block}  .ngx-slider .ngx-slider-base{width:100%;height:100%;padding:0}  .ngx-slider .ngx-slider-bar-wrapper{left:0;box-sizing:border-box;margin-top:-16px;padding-top:16px;width:100%;height:32px;z-index:1}  .ngx-slider .ngx-slider-draggable{cursor:move}  .ngx-slider .ngx-slider-bar{left:0;width:100%;height:4px;z-index:1;background:#d8e0f3;-webkit-border-radius:2px;-moz-border-radius:2px;border-radius:2px}  .ngx-slider .ngx-slider-bar-wrapper.ngx-slider-transparent .ngx-slider-bar{background:transparent}  .ngx-slider .ngx-slider-bar-wrapper.ngx-slider-left-out-selection .ngx-slider-bar{background:#df002d}  .ngx-slider .ngx-slider-bar-wrapper.ngx-slider-right-out-selection .ngx-slider-bar{background:#03a688}  .ngx-slider .ngx-slider-selection{z-index:2;background:#0db9f0;-webkit-border-radius:2px;-moz-border-radius:2px;border-radius:2px}  .ngx-slider .ngx-slider-pointer{cursor:pointer;width:32px;height:32px;top:-14px;background-color:#0db9f0;z-index:3;-webkit-border-radius:16px;-moz-border-radius:16px;border-radius:16px}  .ngx-slider .ngx-slider-pointer:after{content:"";width:8px;height:8px;position:absolute;top:12px;left:12px;-webkit-border-radius:4px;-moz-border-radius:4px;border-radius:4px;background:#fff}  .ngx-slider .ngx-slider-pointer:hover:after{background-color:#fff}  .ngx-slider .ngx-slider-pointer.ngx-slider-active{z-index:4}  .ngx-slider .ngx-slider-pointer.ngx-slider-active:after{background-color:#451aff}  .ngx-slider .ngx-slider-bubble{cursor:default;bottom:16px;padding:1px 3px;color:#55637d;font-size:16px}  .ngx-slider .ngx-slider-bubble.ngx-slider-limit{color:#55637d}  .ngx-slider .ngx-slider-ticks{box-sizing:border-box;width:100%;height:0;position:absolute;left:0;top:-3px;margin:0;z-index:1;list-style:none}  .ngx-slider .ngx-slider-ticks-values-under .ngx-slider-tick-value{top:auto;bottom:-36px}  .ngx-slider .ngx-slider-tick{text-align:center;cursor:pointer;width:10px;height:10px;background:#d8e0f3;border-radius:50%;position:absolute;top:0;left:0;margin-left:11px}  .ngx-slider .ngx-slider-tick.ngx-slider-selected{background:#0db9f0}  .ngx-slider .ngx-slider-tick-value{position:absolute;top:-34px;transform:translate(-50%)}  .ngx-slider .ngx-slider-tick-legend{position:absolute;top:24px;transform:translate(-50%);max-width:50px;white-space:normal}  .ngx-slider.vertical{position:relative;width:4px;height:100%;margin:0 20px;padding:0;vertical-align:baseline;touch-action:pan-x}  .ngx-slider.vertical .ngx-slider-base{width:100%;height:100%;padding:0}  .ngx-slider.vertical .ngx-slider-bar-wrapper{top:auto;left:0;margin:0 0 0 -16px;padding:0 0 0 16px;height:100%;width:32px}  .ngx-slider.vertical .ngx-slider-bar{bottom:0;left:auto;width:4px;height:100%}  .ngx-slider.vertical .ngx-slider-pointer{left:-14px!important;top:auto;bottom:0}  .ngx-slider.vertical .ngx-slider-bubble{left:16px!important;bottom:0}  .ngx-slider.vertical .ngx-slider-ticks{height:100%;width:0;left:-3px;top:0;z-index:1}  .ngx-slider.vertical .ngx-slider-tick{vertical-align:middle;margin-left:auto;margin-top:11px}  .ngx-slider.vertical .ngx-slider-tick-value{left:24px;top:auto;transform:translateY(-28%)}  .ngx-slider.vertical .ngx-slider-tick-legend{top:auto;right:24px;transform:translateY(-28%);max-width:none;white-space:nowrap}  .ngx-slider.vertical .ngx-slider-ticks-values-under .ngx-slider-tick-value{bottom:auto;left:auto;right:24px}  .ngx-slider *{transition:none}  .ngx-slider.animate .ngx-slider-bar-wrapper{transition:all linear .3s}  .ngx-slider.animate .ngx-slider-selection{transition:background-color linear .3s}  .ngx-slider.animate .ngx-slider-pointer{transition:all linear .3s}  .ngx-slider.animate .ngx-slider-pointer:after{transition:all linear .3s}  .ngx-slider.animate .ngx-slider-bubble{transition:all linear .3s}  .ngx-slider.animate .ngx-slider-bubble.ngx-slider-limit{transition:opacity linear .3s}  .ngx-slider.animate .ngx-slider-bubble.ngx-slider-combined{transition:opacity linear .3s}  .ngx-slider.animate .ngx-slider-tick{transition:background-color linear .3s}']})}return i})(),Lt=(()=>{class i{static \u0275fac=function(t){return new(t||i)};static \u0275mod=pe({type:i});static \u0275inj=de({imports:[V]})}return i})();var It=(()=>{class i{constructor(){this.minTime=I.required(),this.maxTime=I.required(),this.minTimeValueChanged=ue(),this.maxTimeValueChanged=ue(),this.minTimeValue=0,this.maxTimeValue=0}ngOnInit(){let e=be(()=>this.createDateRange());this.minTimeValue=e()[0].getTime(),this.maxTimeValue=e()[e().length-1].getTime(),this.options={stepsArray:e().map(t=>({value:t.getTime()})),translate:(t,r)=>{let o=new Date(t),s=o.getDate().toString().padStart(2,"0"),d=(o.getMonth()+1).toString().padStart(2,"0"),h=o.getHours().toString().padStart(2,"0"),g=o.getMinutes().toString().padStart(2,"0");return`${s}/${d} - ${h}:${g}`},hideLimitLabels:!0,hidePointerLabels:!1,draggableRange:!0,enforceRange:!1,enforceStep:!0,noSwitching:!0}}onChange(e){this.minTimeValueChanged.emit(this.minTimeValue),this.maxTimeValueChanged.emit(this.maxTimeValue)}createDateRange(){let e=new Date(this.minTime()),t=new Date(this.maxTime()),r=[],o=new Date(e);for(;o<=t;)r.push(new Date(o)),o.setMinutes(o.getMinutes()+1);return r}static{this.\u0275fac=function(t){return new(t||i)}}static{this.\u0275cmp=T({type:i,selectors:[["app-date-slider"]],inputs:{minTime:[1,"minTime"],maxTime:[1,"maxTime"]},outputs:{minTimeValueChanged:"minTimeValueChanged",maxTimeValueChanged:"maxTimeValueChanged"},standalone:!0,features:[ee],decls:1,vars:3,consts:[[3,"valueChange","highValueChange","value","options","highValue"]],template:function(t,r){t&1&&(a(0,"ngx-slider",0),nt("valueChange",function(s){return Ue(r.minTimeValue,s)||(r.minTimeValue=s),s})("highValueChange",function(s){return Ue(r.maxTimeValue,s)||(r.maxTimeValue=s),s}),S("valueChange",function(s){return r.onChange(s)}),l()),t&2&&(Be("value",r.minTimeValue),u("options",r.options),Be("highValue",r.maxTimeValue))},dependencies:[V,Lt,$e]})}}return i})();var Dt=(()=>{class i{constructor(){this.min=I.required(),this.max=I.required(),this.label=I.required(),this.dataChange=ue(),this.value=D(0)}ngOnInit(){let e=be(()=>this.createRange());this.value.set(this.max()),this.options={stepsArray:e().map(t=>({value:t})),translate:(t,r)=>this.label()+t,showSelectionBar:!0}}onChange(){this.dataChange.emit(this.value())}createRange(){let e=this.min(),t=this.max(),r=[];for(;e<=t;)r.push(e),e=e+10;return r}static{this.\u0275fac=function(t){return new(t||i)}}static{this.\u0275cmp=T({type:i,selectors:[["app-slider"]],inputs:{min:[1,"min"],max:[1,"max"],label:[1,"label"]},outputs:{dataChange:"dataChange"},standalone:!0,features:[ee],decls:1,vars:2,consts:[[3,"valueChange","value","options"]],template:function(t,r){t&1&&(a(0,"ngx-slider",0),nt("valueChange",function(s){return Ue(r.value,s)||(r.value=s),s}),S("valueChange",function(){return r.onChange()}),l()),t&2&&(Be("value",r.value),u("options",r.options))},dependencies:[V,Lt,$e]})}}return i})();function oi(i,n){!n?.injector&&Ci(oi);let e=n?.injector??Si(Ti),t=new ci(1),r=Hi(()=>{let o;try{o=i()}catch(s){Wt(()=>t.error(s));return}Wt(()=>t.next(o))},{injector:e,manualCleanup:!0});return e.get(Ei).onDestroy(()=>{r.destroy(),t.complete()}),t.asObservable()}function Hr(i,n){if(i&1){let e=q();a(0,"li",18)(1,"div",7)(2,"input",21),S("change",function(r){F(e);let o=b();return A(o.onAirlinesSelect(r))}),l(),a(3,"span",9),m(4),l()()()}if(i&2){let e=n.$implicit;c(2),J("checked",e.isActive?"checked":""),u("value",e.id),c(2),_(e.name)}}function Fr(i,n){if(i&1){let e=q();a(0,"li",6)(1,"div",7)(2,"input",21),S("change",function(r){F(e);let o=b();return A(o.onAirportSelect(r))}),l(),a(3,"span",9),m(4),l()()()}if(i&2){let e=n.$implicit;c(2),J("checked",e.isActive?"checked":""),u("value",e.entityId),c(2),_(e.name)}}function Ar(i,n){if(i&1){let e=q();a(0,"li",6)(1,"div",7)(2,"input",21),S("change",function(r){F(e);let o=b();return A(o.onAirportSelect(r))}),l(),a(3,"span",9),m(4),l()()()}if(i&2){let e=n.$implicit;c(2),J("checked",e.isActive?"checked":""),u("value",e.entityId),c(2),_(e.name)}}var kt=(()=>{class i{constructor(){this.filterStats=I.required(),this.stopData=D({}),this.airportData=D([]),this.airlineData=D([]),this.priceData=D(0),this.minTimeDeparture=D(""),this.maxTimeDeparture=D(""),this.minTimeLanding=D(""),this.maxTimeLanding=D(""),this.allState=D([this.priceData,this.minTimeDeparture,this.maxTimeDeparture,this.minTimeLanding,this.maxTimeLanding,this.stopData,this.airportData,this.airlineData]),this.latestState=be(()=>this.allState().map(e=>e())),this.latestState$=oi(this.latestState),this.filterChange=ue()}ngOnInit(){console.log("filterStats",this.filterStats()),this.minTimeDeparture.set(this.filterStats().timeRange.minTimeDeparture),this.maxTimeDeparture.set(this.filterStats().timeRange.maxTimeDeparture),this.minTimeLanding.set(this.filterStats().timeRange.minTimeLanding),this.maxTimeLanding.set(this.filterStats().timeRange.maxTimeLanding),this.stopData.set(this.filterStats().stopPrices),this.airlineData.set(this.filterStats().carriers),this.airportData.set(this.filterStats().airports),this.handleFilterChange()}handleFilterChange(){this.latestState$.pipe(vi(2),Je(500),Ze()).subscribe(()=>{this.handleFiterChange()})}handleFiterChange(){this.filterChange.emit({duration:this.filterStats().duration,airports:this.airportData(),carriers:this.airlineData(),stopPrices:this.stopData(),timeRange:{minTimeDeparture:this.minTimeDeparture(),maxTimeDeparture:this.maxTimeDeparture(),minTimeLanding:this.minTimeLanding(),maxTimeLanding:this.maxTimeLanding()},priceRange:{minPrice:this.filterStats().priceRange.minPrice,maxPrice:this.priceData()}}),console.log("filterChange",JSON.stringify(this.filterStats()))}handleMinTimeDepartureValueChange(e){this.minTimeDeparture.set(We(e))}handleMaxTimeDepartureValueChange(e){this.maxTimeDeparture.set(We(e))}handleMinTimeLandingValueChange(e){this.minTimeLanding.set(We(e))}handleMaxTimeLandingValueChange(e){this.maxTimeLanding.set(We(e))}handlePriceChange(e){this.priceData.set(e)}onStopSelect(e){let t=e.target.value;this.stopData.set(P(M({},this.stopData()),{[t]:P(M({},this.stopData()[t]),{isActive:e.target.checked})}))}onAirlinesSelect(e){console.log(parseInt(e.target.value)===-32690),console.log(e.target.checked),this.airlineData.set(this.airlineData().map(t=>t.id===parseInt(e.target.value)?P(M({},t),{isActive:e.target.checked}):t))}onAirportSelect(e){console.log(e.target.value),console.log(e.target.checked),this.airportData.set(this.airportData().map(t=>{let r=t.airports.map(o=>parseInt(o.entityId)===parseInt(e.target.value)?P(M({},o),{isActive:e.target.checked}):o);return P(M({},t),{airports:r})})),console.log("airportData",this.airportData())}clearAirlineCheckboxes(){this.airlineData.set(this.airlineData().map(e=>P(M({},e),{isActive:!1}))),this.handleFiterChange()}clearAirportCheckboxes(){this.airportData.set(this.airportData().map(e=>{let t=e.airports.map(r=>P(M({},r),{isActive:!1}));return P(M({},e),{airports:t})})),console.log(this.airportData()),this.handleFiterChange()}static{this.\u0275fac=function(t){return new(t||i)}}static{this.\u0275cmp=T({type:i,selectors:[["app-card-filter"]],inputs:{filterStats:[1,"filterStats"]},outputs:{filterChange:"filterChange"},standalone:!0,features:[ee],decls:91,vars:20,consts:[[1,"flex","flex-col","mx-auto","mb-10","w-full","min-w-16","text-xs","bg-white","rounded-xl","border","border-black","border-solid"],[1,"flex","flex-col","w-auto"],[1,"collapse","collapse-arrow","collapse-open"],["type","checkbox"],[1,"collapse-title","flex","justify-between","items-center","px-6","py-3","w-full","text-xl","font-bold","text-black","whitespace-nowrap"],[1,"collapse-content"],[1,"flex","gap-10","justify-between","items-start","px-6","py-2","w-auto","text-sm","text-black"],[1,"flex","gap-3","items-center"],["type","checkbox","checked","checked",1,"checkbox",3,"change","value","disabled"],[1,"self-stretch","my-auto"],[1,"divider"],[1,"gap-2","self-stretch","px-4","py-2","w-full","text-base","text-black"],[1,"custom-slider","px-4","w-full"],[3,"minTimeValueChanged","maxTimeValueChanged","minTime","maxTime"],[1,"gap-2.5","self-stretch","px-4","py-2","w-full","text-base","text-black"],[1,"custom-slider","px-4","py-2","w-full"],[1,"px-6","py-2"],[1,"btn","btn-sm","btn-outline",3,"click"],[1,"flex","gap-10","justify-between","items-start","px-6","py-2","w-auto","text-sm","text-black","whitespace-nowrap"],[3,"dataChange","min","max","label"],[1,"gap-1","self-stretch","px-4","py-2","w-full","text-base","text-black"],["type","checkbox",1,"checkbox",3,"change","checked","value"]],template:function(t,r){t&1&&(a(0,"div",0)(1,"section",1)(2,"div",2),v(3,"input",3),a(4,"div",4),m(5," Stops "),l(),a(6,"div",5)(7,"ul")(8,"li",6)(9,"div",7)(10,"input",8),S("change",function(s){return r.onStopSelect(s)}),l(),a(11,"span",9),m(12,"Non Stop"),l()(),a(13,"span"),m(14),l()(),a(15,"li",6)(16,"div",7)(17,"input",8),S("change",function(s){return r.onStopSelect(s)}),l(),a(18,"span",9),m(19,"1 Stop"),l()(),a(20,"span"),m(21),l()(),a(22,"li",6)(23,"div",7)(24,"input",8),S("change",function(s){return r.onStopSelect(s)}),l(),a(25,"span",9),m(26,"2 Stops+"),l()(),a(27,"span"),m(28),l()()()()()(),v(29,"div",10),a(30,"section",1)(31,"div",2),v(32,"input",3),a(33,"div",4),m(34," Flight Time "),l(),a(35,"div",5)(36,"div")(37,"div",11)(38,"strong"),m(39),l()(),a(40,"div",12)(41,"app-date-slider",13),S("minTimeValueChanged",function(s){return r.handleMinTimeDepartureValueChange(s)})("maxTimeValueChanged",function(s){return r.handleMaxTimeDepartureValueChange(s)}),l()()(),a(42,"div")(43,"div",14)(44,"strong"),m(45),l()(),a(46,"div",15)(47,"app-date-slider",13),S("minTimeValueChanged",function(s){return r.handleMinTimeLandingValueChange(s)})("maxTimeValueChanged",function(s){return r.handleMaxTimeLandingValueChange(s)}),l()()()()()(),v(48,"div",10),a(49,"div",2)(50,"div",16)(51,"button",17),S("click",function(){return r.clearAirlineCheckboxes()}),m(52," Clear All Airlines "),l()(),v(53,"input",3),a(54,"div",4),m(55," Airline "),l(),a(56,"div",5)(57,"ul"),N(58,Hr,5,3,"li",18,R),l()()(),v(60,"div",10),a(61,"section",1)(62,"div",2),v(63,"input",3),a(64,"div",4),m(65," Price "),l(),a(66,"div",5)(67,"div",15)(68,"app-slider",19),S("dataChange",function(s){return r.handlePriceChange(s)}),l()()()()(),v(69,"div",10),a(70,"section",1)(71,"div",2)(72,"div",16)(73,"button",17),S("click",function(){return r.clearAirportCheckboxes()}),m(74," Clear All Airlines "),l()(),v(75,"input",3),a(76,"div",4),m(77," Airports "),l(),a(78,"div",5)(79,"div",20)(80,"strong"),m(81),l()(),a(82,"ul"),N(83,Fr,5,3,"li",6,R),l(),a(85,"div",20)(86,"strong"),m(87),l()(),a(88,"ul"),N(89,Ar,5,3,"li",6,R),l()()()()()),t&2&&(c(10),u("value","direct")("disabled",!r.filterStats().stopPrices.direct.isPresent),c(4),_(r.filterStats().stopPrices.direct.formattedPrice),c(3),u("value","one")("disabled",!r.filterStats().stopPrices.one.isPresent),c(4),_(r.filterStats().stopPrices.one.formattedPrice),c(3),u("value","twoOrMore")("disabled",!r.filterStats().stopPrices.twoOrMore.isPresent),c(4),_(r.filterStats().stopPrices.twoOrMore.formattedPrice),c(11),O("Departure from ",r.filterStats().airports[0].city,""),c(2),u("minTime",r.minTimeDeparture())("maxTime",r.maxTimeDeparture()),c(4),O("Landing at ",r.filterStats().airports[1].city,""),c(2),u("minTime",r.minTimeLanding())("maxTime",r.maxTimeLanding()),c(11),B(r.airlineData()),c(10),u("min",r.filterStats().priceRange.minPrice)("max",r.filterStats().priceRange.maxPrice)("label","$"),c(13),O("Departure from ",r.airportData()[0].city,""),c(2),B(r.airportData()[0].airports),c(4),O("Return at ",r.airportData()[0].city,""),c(2),B(r.airportData()[1].airports))},dependencies:[V,It,Dt]})}}return i})();var Br=i=>({results:i,field:"from_departure"}),Ur=i=>({results:i,field:"to_destination"});function jr(i,n){i&1&&jt(0)}function Wr(i,n){i&1&&jt(0)}function zr(i,n){i&1&&v(0,"div",16)}function qr(i,n){if(i&1&&(a(0,"label",17)(1,"div",7),m(2," Departure Date "),l(),v(3,"input",18),l()),i&2){let e=b();u("formGroup",e.flightSearchForm)}}function Kr(i,n){if(i&1&&(a(0,"div",19)(1,"div",20)(2,"label",21)(3,"div",22)(4,"span",23),m(5,"Departure Date"),l()(),v(6,"input",24),l()(),a(7,"span",25),m(8," swap_horiz "),l(),a(9,"div",20)(10,"label",21)(11,"div",22)(12,"span",23),m(13,"Return Date"),l()(),v(14,"input",26),l()()()),i&2){let e=b();u("formGroup",e.flightSearchForm)}}function $r(i,n){if(i&1){let e=q();a(0,"li",31),S("click",function(){let r=F(e).$implicit,o=b(2).field,s=b();return A(s.selectResult(o,r))}),m(1),l()}if(i&2){let e=n.$implicit;c(),O(" ",e.presentation.title," ")}}function Gr(i,n){if(i&1&&(a(0,"div",28)(1,"ul",29),w(2,$r,2,1,"li",30),l()()),i&2){let e=b().results;c(2),u("ngForOf",e)}}function Qr(i,n){if(i&1&&w(0,Gr,3,1,"div",27),i&2){let e=n.results;u("ngIf",e&&e.length>0)}}var Vt=(()=>{class i{constructor(e,t,r){this._flightServiceAPI=e,this._fb=t,this.cdr=r,this.paramSearch=I.required(),this.formSubmit$=new Pt,this.destroy$=new Pt,this.fromResults=[],this.toResults=[],this.selectedFlightType="oneWay"}ngOnInit(){this.initForm(this.paramSearch()),this.paramSearch().return_date&&(this.selectedFlightType="roundTrip"),this.setupAutocomplete(),this.formSubmit$.pipe(le(()=>this.flightSearchForm.markAsDirty()),Ft(()=>Ji(this.flightSearchForm)),Re(e=>(console.log(e),e)),At(this.destroy$))}ngOnDestroy(){this.destroy$.next(),this.destroy$.complete()}initForm(e){let t,r=new Date(e.depart_date).toISOString().split("T")[0];e.return_date?t=new Date(e.return_date).toISOString().split("T")[0]:t="",this.flightSearchForm=this._fb.group({from_departure:[e.from_departure,[W.required,W.minLength(3)]],from_departure_skyID:[e.from_departure_id],to_destination:[e.to_destination,[W.required,W.minLength(3)]],to_destination_skyID:[e.to_destination_id],tripType:["oneWay"],depart_date:[r,[W.required]],return_date:[t,[W.required]],class_type:[e.class_type],traveller_type:[e.traveller_type]})}setupAutocomplete(){this.setupFieldAutocomplete("from_departure"),this.setupFieldAutocomplete("to_destination")}setupFieldAutocomplete(e){this.flightSearchForm.get(e).valueChanges.pipe(Je(500),Ze(),le(t=>{t.length<3&&(this[e==="from_departure"?"fromResults":"toResults"]=[])}),Re(t=>t.length>=3),Ft(t=>{let r=t.replace(/\s+/g,"-").toLowerCase();return this._flightServiceAPI.getLocations(r).pipe(gi(o=>(console.error(`Error fetching ${e} locations:`,o),Qe({data:[]}))))}),At(this.destroy$)).subscribe(t=>{let r=e==="from_departure"?"fromResults":"toResults";this[r]=t.data.length>0?t.data:[{presentation:{title:"No data found"}}],console.log(`${e} results:`,this[r])})}selectResult(e,t){let r=this.flightSearchForm.get(e),o=this.flightSearchForm.get(`${e}_skyID`);r.setValue(t.presentation.title,{emitEvent:!1}),o.setValue(t.navigation.relevantFlightParams.skyId,{emitEvent:!1}),e==="from_departure"?this.fromResults=[]:this.toResults=[],console.log(o.value)}selectFlightType(e){if(this.selectedFlightType=e,e==="oneWay"){let t=this.flightSearchForm.get("return_date");t?.clearValidators(),t?.setValue("")}else{let t=this.flightSearchForm.get("depart_date"),r=this.flightSearchForm.get("return_date");t?.setValidators([W.required]),r?.setValidators([W.required])}this.flightSearchForm.updateValueAndValidity(),this.cdr.detectChanges()}static{this.\u0275fac=function(t){return new(t||i)(y(Ee),y(at),y(xe))}}static{this.\u0275cmp=T({type:i,selectors:[["app-card-search"]],inputs:{paramSearch:[1,"paramSearch"]},standalone:!0,features:[ee],decls:30,vars:12,consts:[["oneWayCalendar",""],["roundTripCalendar",""],["autocompleteTemplate",""],[1,"bg-white","rounded-lg","shadow-md","p-6","mb-8"],[1,"space-y-4",3,"formGroup"],[1,"flex","flex-row","gap-4"],[1,"space-y-2"],[1,"block","text-sm","font-medium","text-gray-700"],["type","text","formControlName","from_departure","placeholder","Departure City","id","from_departure",1,"w-full","px-4","py-2","border","rounded-md","focus:ring-2","focus:ring-blue-500"],[4,"ngTemplateOutlet","ngTemplateOutletContext"],["type","text","formControlName","to_destination","placeholder","Arrival City","id","to_destination",1,"w-full","px-4","py-2","border","rounded-md","focus:ring-2","focus:ring-blue-500"],["formControlName","tripType",1,"w-32","px-4","py-2","border","rounded-md","focus:ring-2","focus:ring-blue-500"],["value","oneWay"],["value","roundTrip"],["class","",4,"ngIf","ngIfThen","ngIfElse"],["type","submit",1,"w-full","md:w-auto","px-6","py-3","bg-blue-600","text-white","rounded-md","hover:bg-blue-700","transition","duration-200"],[1,""],[1,"form-control","space-y-2",3,"formGroup"],["type","date","placeholder","Today","id","depart_date","formControlName","depart_date","name","depart_date","required","",1,"w-full","px-4","py-2","border","rounded-md","focus:ring-2","focus:ring-blue-500"],[1,"flex","items-center",3,"formGroup"],[1,"flex","flex-col"],[1,"form-control","w-full","max-w-xs"],[1,"label","flex","gap-2","justify-start"],[1,"label-text"],["type","date","placeholder","Today","id","depart_date","formControlName","depart_date","name","depart_date","required","",1,"input","input-bordered","w-full","max-w-xs"],[1,"material-symbols-outlined","mt-8"],["type","date","placeholder","Today","id","return_date","formControlName","return_date","name","return_date","required","",1,"input","input-bordered","w-full","max-w-xs"],["class","absolute z-10 w-[252px] bg-white shadow-lg rounded-md",4,"ngIf"],[1,"absolute","z-10","w-[252px]","bg-white","shadow-lg","rounded-md"],[1,"py-1"],["class","px-4 py-2 hover:bg-gray-100 cursor-pointer",3,"click",4,"ngFor","ngForOf"],[1,"px-4","py-2","hover:bg-gray-100","cursor-pointer",3,"click"]],template:function(t,r){if(t&1&&(a(0,"div",3)(1,"form",4)(2,"div",5)(3,"div",6)(4,"label",7),m(5,"From"),l(),v(6,"input",8),w(7,jr,1,0,"ng-container",9),l(),a(8,"div",6)(9,"label",7),m(10,"To"),l(),v(11,"input",10),w(12,Wr,1,0,"ng-container",9),l(),a(13,"div",6)(14,"label",7),m(15,"Trip Type"),l(),a(16,"select",11)(17,"option",12),m(18,"One Way"),l(),a(19,"option",13),m(20,"Round Trip"),l()()(),w(21,zr,1,0,"div",14),l(),a(22,"button",15),m(23," Search Flights "),l()()(),w(24,qr,4,1,"ng-template",null,0,ve)(26,Kr,15,1,"ng-template",null,1,ve)(28,Qr,1,1,"ng-template",null,2,ve)),t&2){let o=ge(25),s=ge(27),d=ge(29);c(),u("formGroup",r.flightSearchForm),c(6),u("ngTemplateOutlet",d)("ngTemplateOutletContext",je(8,Br,r.fromResults)),c(5),u("ngTemplateOutlet",d)("ngTemplateOutletContext",je(10,Ur,r.toResults)),c(9),u("ngIf",r.selectedFlightType=="oneWay")("ngIfThen",o)("ngIfElse",s)}},dependencies:[V,ce,$,ot,lt,Wi,$i,Gi,Bi,Ki,Ui,ji,Qi,zi,qi]})}}return i})();function Jr(i,n,e,t){let r=window&&!!window.document&&window.document.documentElement,o=r&&n?window:e;if(i&&(o=i&&r&&typeof i=="string"?Zr(i,e.nativeElement,t):i,!o))throw new Error("ngx-infinite-scroll {resolveContainerElement()}: selector for");return o}function Zr(i,n,e){return(e?window.document:n).querySelector(i)}function si(i){return i&&!i.firstChange}function Xr(){return typeof window<"u"}var eo={clientHeight:"clientHeight",offsetHeight:"offsetHeight",scrollHeight:"scrollHeight",pageYOffset:"pageYOffset",offsetTop:"offsetTop",scrollTop:"scrollTop",top:"top"},to={clientHeight:"clientWidth",offsetHeight:"offsetWidth",scrollHeight:"scrollWidth",pageYOffset:"pageXOffset",offsetTop:"offsetLeft",scrollTop:"scrollLeft",top:"left"},ai=class{constructor(n=!0){this.vertical=n,this.propsMap=n?eo:to}clientHeightKey(){return this.propsMap.clientHeight}offsetHeightKey(){return this.propsMap.offsetHeight}scrollHeightKey(){return this.propsMap.scrollHeight}pageYOffsetKey(){return this.propsMap.pageYOffset}offsetTopKey(){return this.propsMap.offsetTop}scrollTopKey(){return this.propsMap.scrollTop}topKey(){return this.propsMap.top}};function io(i,n,e){return!!(i&&n||!e&&n)}function no({windowElement:i,axis:n}){return ro({axis:n,isWindow:oo(i)},i)}function ro(i,n){let e=i.isWindow||n&&!n.nativeElement?n:n.nativeElement;return P(M({},i),{container:e})}function oo(i){return["Window","global"].some(e=>Object.prototype.toString.call(i).includes(e))}function pi(i,n){return i?n.document.documentElement:null}function Mn(i,n){let e=lo(n);return n.isWindow?so(e,i,n):ao(e,i,n)}function so(i,n,e){let{axis:t,container:r,isWindow:o}=e,{offsetHeightKey:s,clientHeightKey:d}=Pn(t),h=i+Fn(pi(o,r),t,o),g=Hn(n.nativeElement,o,s,d),x=po(n.nativeElement,t,o)+g;return{height:i,scrolled:h,totalToScroll:x,isWindow:o}}function ao(i,n,e){let{axis:t,container:r}=e,o=r[t.scrollTopKey()],s=r[t.scrollHeightKey()];return{height:i,scrolled:o,totalToScroll:s,isWindow:!1}}function Pn(i){return{offsetHeightKey:i.offsetHeightKey(),clientHeightKey:i.clientHeightKey()}}function lo({container:i,isWindow:n,axis:e}){let{offsetHeightKey:t,clientHeightKey:r}=Pn(e);return Hn(i,n,t,r)}function Hn(i,n,e,t){if(isNaN(i[e])){let r=pi(n,i);return r?r[t]:0}else return i[e]}function po(i,n,e){let t=n.topKey();if(i.getBoundingClientRect)return i.getBoundingClientRect()[t]+Fn(i,n,e)}function Fn(i,n,e){let t=n.pageYOffsetKey(),r=n.scrollTopKey(),o=n.offsetTopKey();return isNaN(window.pageYOffset)?pi(e,i)[r]:i.ownerDocument?i.ownerDocument.defaultView[t]:i[o]}function co(i,n={down:0,up:0},e){let t,r;if(i.totalToScroll<=0)return!1;let o=i.isWindow?i.scrolled:i.height+i.scrolled;if(e)t=(i.totalToScroll-o)/i.totalToScroll,r=(n?.down?n.down:0)/10;else{let d=i.scrolled+(i.totalToScroll-o);t=i.scrolled/d,r=(n?.up?n.up:0)/10}return t<=r}function ho(i,n){return i<n.scrolled}function mo(i,n,e){let t=ho(i,n);return{fire:co(n,e,t),scrollDown:t}}var li=class{constructor(n){this.lastScrollPosition=0,this.lastTotalToScroll=0,this.totalToScroll=0,this.triggered={down:0,up:0},Object.assign(this,n)}updateScrollPosition(n){return this.lastScrollPosition=n}updateTotalToScroll(n){this.lastTotalToScroll!==n&&(this.lastTotalToScroll=this.totalToScroll,this.totalToScroll=n)}updateScroll(n,e){this.updateScrollPosition(n),this.updateTotalToScroll(e)}updateTriggeredFlag(n,e){e?this.triggered.down=n:this.triggered.up=n}isTriggeredScroll(n,e){return e?this.triggered.down===n:this.triggered.up===n}};function uo(i){let{scrollContainer:n,scrollWindow:e,element:t,fromRoot:r}=i,o=no({axis:new ai(!i.horizontal),windowElement:Jr(n,e,t,r)}),s=new li({totalToScroll:Mn(t,o).totalToScroll}),d={container:o.container,throttle:i.throttle},h={up:i.upDistance,down:i.downDistance};return fo(d).pipe(Ye(()=>Qe(Mn(t,o))),_e(g=>go(s.lastScrollPosition,g,h)),le(({stats:g})=>s.updateScroll(g.scrolled,g.totalToScroll)),Re(({fire:g,scrollDown:x,stats:{totalToScroll:L}})=>io(i.alwaysCallback,g,s.isTriggeredScroll(L,x))),le(({scrollDown:g,stats:{totalToScroll:x}})=>{s.updateTriggeredFlag(x,g)}),_e(vo))}function fo(i){let n=fi(i.container,"scroll");return i.throttle&&(n=n.pipe(xi(i.throttle,void 0,{leading:!0,trailing:!0}))),n}function go(i,n,e){let{scrollDown:t,fire:r}=mo(i,n,e);return{scrollDown:t,fire:r,stats:n}}var di={DOWN:"[NGX_ISE] DOWN",UP:"[NGX_ISE] UP"};function vo(i){let{scrollDown:n,stats:{scrolled:e}}=i;return{type:n?di.DOWN:di.UP,payload:{currentScrollPosition:e}}}var An=(()=>{class i{constructor(e,t){this.element=e,this.zone=t,this.scrolled=new se,this.scrolledUp=new se,this.infiniteScrollDistance=2,this.infiniteScrollUpDistance=1.5,this.infiniteScrollThrottle=150,this.infiniteScrollDisabled=!1,this.infiniteScrollContainer=null,this.scrollWindow=!0,this.immediateCheck=!1,this.horizontal=!1,this.alwaysCallback=!1,this.fromRoot=!1}ngAfterViewInit(){this.infiniteScrollDisabled||this.setup()}ngOnChanges({infiniteScrollContainer:e,infiniteScrollDisabled:t,infiniteScrollDistance:r}){let o=si(e),s=si(t),d=si(r),h=!s&&!this.infiniteScrollDisabled||s&&!t.currentValue||d;(o||s||d)&&(this.destroyScroller(),h&&this.setup())}ngOnDestroy(){this.destroyScroller()}setup(){Xr()&&this.zone.runOutsideAngular(()=>{this.disposeScroller=uo({fromRoot:this.fromRoot,alwaysCallback:this.alwaysCallback,disable:this.infiniteScrollDisabled,downDistance:this.infiniteScrollDistance,element:this.element,horizontal:this.horizontal,scrollContainer:this.infiniteScrollContainer,scrollWindow:this.scrollWindow,throttle:this.infiniteScrollThrottle,upDistance:this.infiniteScrollUpDistance}).subscribe(e=>this.handleOnScroll(e))})}handleOnScroll({type:e,payload:t}){let r=e===di.DOWN?this.scrolled:this.scrolledUp;xo(r)&&this.zone.run(()=>r.emit(t))}destroyScroller(){this.disposeScroller&&this.disposeScroller.unsubscribe()}static{this.\u0275fac=function(t){return new(t||i)(y(fe),y(et))}}static{this.\u0275dir=Oe({type:i,selectors:[["","infiniteScroll",""],["","infinite-scroll",""],["","data-infinite-scroll",""]],inputs:{infiniteScrollDistance:"infiniteScrollDistance",infiniteScrollUpDistance:"infiniteScrollUpDistance",infiniteScrollThrottle:"infiniteScrollThrottle",infiniteScrollDisabled:"infiniteScrollDisabled",infiniteScrollContainer:"infiniteScrollContainer",scrollWindow:"scrollWindow",immediateCheck:"immediateCheck",horizontal:"horizontal",alwaysCallback:"alwaysCallback",fromRoot:"fromRoot"},outputs:{scrolled:"scrolled",scrolledUp:"scrolledUp"},standalone:!0,features:[Xe]})}}return i})();function xo(i){return i.observed??i.observers.length>0}var Rn=(()=>{class i{static{this.\u0275fac=function(t){return new(t||i)}}static{this.\u0275mod=pe({type:i})}static{this.\u0275inj=de({})}}return i})();var Nn=(()=>{class i{static{this.\u0275fac=function(t){return new(t||i)}}static{this.\u0275cmp=T({type:i,selectors:[["app-loading-page"]],decls:4,vars:0,consts:[[1,"flex","flex-col","items-center","justify-center","h-96"],[1,"loading","loading-spinner","h-16","w-16"]],template:function(t,r){t&1&&(a(0,"div",0)(1,"h2"),m(2,"Searching for flights..."),l(),v(3,"span",1),l())}})}}return i})();function yo(i,n){if(i&1&&(a(0,"h2",6),m(1),te(2,"weekMonthDay"),l(),a(3,"p",7),m(4),te(5,"durationFormat"),l()),i&2){let e=b(2);c(),it(" ",e.headerText()," \xB7 ",ie(2,3,e.legInfo.headerDate||"")," "),c(3),O(" ",ie(5,5,e.legInfo.fullDurationSegment)," ")}}function So(i,n){i&1&&v(0,"div")}function Co(i,n){i&1&&(a(0,"div",31),v(1,"div",32),l())}function _o(i,n){if(i&1&&(a(0,"div",33)(1,"p"),m(2),l(),m(3," \u2022 "),a(4,"p"),m(5," Change planes in "),a(6,"strong"),m(7),l()()()),i&2){let e=b().$index,t=b(2);c(2),_(t.legInfo.layoverInfo[e].duration),c(5),_(t.legInfo.layoverInfo[e].layoverAirport)}}function Oo(i,n){i&1&&(a(0,"div",31),v(1,"div",32),l())}function To(i,n){if(i&1){let e=q();a(0,"div",8)(1,"div",9)(2,"div",10),v(3,"img",11),a(4,"p",12),m(5),l()(),a(6,"div",13)(7,"div",14),v(8,"div",15)(9,"div",16),l(),a(10,"div",17)(11,"time",18),m(12),te(13,"timeFormat"),l(),a(14,"p",19),m(15),l()()(),a(16,"div",20)(17,"span",21),m(18," travel "),l(),a(19,"p",22),m(20),te(21,"durationFormat"),l()(),a(22,"div",23)(23,"div",14)(24,"div",24),v(25,"div",16)(26,"div",15),l()(),a(27,"div",25)(28,"time",18),m(29),te(30,"timeFormat"),l(),a(31,"p",26),m(32),l()()()(),a(33,"button",27),S("click",function(){let r=F(e).$index,o=b(2);return A(o.toggleDetail(r))}),w(34,So,1,0,"div",28),l()(),w(35,Co,2,0,"div",29)(36,_o,8,2,"div",30)(37,Oo,2,0,"div",29)}if(i&2){let e=n.$implicit,t=n.$index,r=b(2),o=ge(2),s=ge(4);c(3),J("ngSrc",e.flightLogoBrand),c(2),O(" ",e.flightLogoBrandName," "),c(7),_(ie(13,13,e.departureTime)),c(3),O(" ",e.departureAirport," "),c(5),O(" ",ie(21,15,e.duration)," "),c(9),_(ie(30,17,e.arrivalTime)),c(3),O(" ",e.arrivalAirport," "),c(2),u("ngIf",r.legInfo.isDetailSegmentAmenities[t])("ngIfThen",o)("ngIfElse",s),c(),u("ngIf",t<r.legInfo.flightSegmentInfo.length-1),c(),u("ngIf",t<r.legInfo.flightSegmentInfo.length-1),c(),u("ngIf",t<r.legInfo.flightSegmentInfo.length-1)}}function Eo(i,n){}function Lo(i,n){if(i&1&&(a(0,"section",3)(1,"header",4),w(2,yo,6,7),l(),v(3,"div",5),N(4,To,38,19,null,null,R,!1,Eo,0,0),l()),i&2){let e=b();c(2),X(e.legInfo?2:-1),c(2),B(e.legInfo==null?null:e.legInfo.flightSegmentInfo)}}function Io(i,n){i&1&&(a(0,"div",34)(1,"div",35)(2,"div",36)(3,"span",37),m(4," airline_seat_recline_extra "),l(),a(5,"p",38),m(6,"28' Seat Pitch"),l()(),a(7,"div",36)(8,"span",37),m(9," restaurant "),l(),a(10,"p",38),m(11,"Light Meal (free)"),l()()(),a(12,"span",37),m(13," arrow_drop_up "),l()())}function Do(i,n){i&1&&(a(0,"div",39)(1,"span",37),m(2," airline_seat_recline_extra "),l(),a(3,"span",37),m(4," restaurant "),l(),a(5,"span",37),m(6," arrow_drop_down "),l()())}var Mt=(()=>{class i{constructor(){this.isLoading=I(!1),this.headerText=I("Depart")}ngOnInit(){}toggleDetail(e){this.legInfo.isDetailSegmentAmenities[e]=!this.legInfo.isDetailSegmentAmenities[e]}static{this.\u0275fac=function(t){return new(t||i)}}static{this.\u0275cmp=T({type:i,selectors:[["app-card-detail-leg"]],inputs:{legInfo:"legInfo",isLoading:[1,"isLoading"],headerText:[1,"headerText"]},standalone:!0,features:[ee],decls:5,vars:1,consts:[["detailSegmentAmenities",""],["defaltSegmentAmenities",""],["class","flex flex-col gap-2 pt-7 pb-12 rounded-xl bg-neutral-200 w-full border border-black",4,"ngIf"],[1,"flex","flex-col","gap-2","pt-7","pb-12","rounded-xl","bg-neutral-200","w-full","border","border-black"],[1,"flex","flex-wrap","gap-10","justify-between","items-center","pr-3","pl-5","w-full","font-semibold","max-md:max-w-full"],[1,"w-full","h-0.5","bg-slate-400"],[1,"self-stretch","my-auto","text-xl","text-gray-800","w-[206px]"],[1,"self-stretch","my-auto","text-base","text-zinc-500","w-[58px]"],[1,"flex","flex-row","justify-between","items-start","mt-5","w-full","max-md:max-w-full","px-4"],[1,"flex","flex-col","pl-11","mt-2.5","w-full","max-md:pl-5","max-md:max-w-full"],[1,"flex","gap-5","-ml-8","items-center","self-stretch","my-auto","min-w-[240px]"],["width","40","height","40",1,"object-contain","shrink-0",3,"ngSrc"],[1,"self-stretch","my-auto","text-sm","font-semibold","text-red-600","w-[100px]","whitespace-nowrap"],[1,"flex","flex-wrap","gap-10","items-start","pl-3","w-full","max-md:max-w-full"],[1,"flex","flex-col","w-3"],["aria-hidden","true",1,"flex","w-3","h-3","bg-white","rounded-full","border-2","border-cyan-600","border-solid","min-h-[12px]"],["aria-hidden","true",1,"flex","self-center","w-0.5","bg-cyan-600","min-h-[27px]"],[1,"flex","gap-9","items-center","text-lg","min-w-[240px]","w-[284px]"],[1,"self-stretch","my-auto","text-base","font-bold","text-zinc-600","w-[73px]","whitespace-nowrap"],[1,"self-stretch","my-auto","text-zinc-600","w-[178px]","whitespace-nowrap"],[1,"flex","flex-wrap","gap-10","items-center","mt-2.5","pl-1.5","w-full","text-sm","font-semibold","text-zinc-400","max-md:max-w-full"],[1,"material-symbols-outlined","text-black"],[1,"flex-1","shrink","gap-2.5","self-stretch","my-auto","min-w-[240px]","w-[284px]"],[1,"flex","gap-10","items-end","pl-3","mt-2.5","max-w-full","w-[332px]"],[1,"flex","flex-col","w-full"],[1,"flex","gap-8","items-center","min-w-[240px]"],[1,"self-stretch","my-auto","text-lg","text-zinc-500","w-[161px]","whitespace-nowrap"],["type","button",3,"click"],[4,"ngIf","ngIfThen","ngIfElse"],["class","flex w-full justify-center items-center",4,"ngIf"],["class","flex flex-row gap-2 ml-7 whitespace-nowrap px-4",4,"ngIf"],[1,"flex","w-full","justify-center","items-center"],[1,"w-11/12","h-0.5","bg-slate-300"],[1,"flex","flex-row","gap-2","ml-7","whitespace-nowrap","px-4"],[1,"flex","flex-row","gap-2","items-start","p-3","my-auto","bg-fuchsia-100","rounded-3xl","w-full"],[1,"flex","flex-col","items-start","justify-start","gap-2.5"],[1,"flex","justify-center","items-center","gap-2"],[1,"material-symbols-outlined"],[1,"text-sm","whitespace-nowrap"],[1,"flex","gap-4","items-center","self-stretch","p-3","my-auto","bg-fuchsia-100","rounded-3xl"]],template:function(t,r){t&1&&w(0,Lo,7,2,"section",2)(1,Io,14,0,"ng-template",null,0,ve)(3,Do,7,0,"ng-template",null,1,ve),t&2&&u("ngIf",!r.isLoading())},dependencies:[V,$,st,pt,dt,en]})}}return i})();function Mo(i,n){i&1&&(a(0,"div",0),v(1,"div",4)(2,"div",5),l())}function Po(i,n){if(i&1&&v(0,"app-card-detail-leg",8),i&2){let e=n.$implicit,t=n.$index;u("legInfo",e)("headerText",t%2===0?"Depart":"Return")}}function Ho(i,n){if(i&1){let e=q();a(0,"button",10),S("click",function(){F(e);let r=b(3);return A(r.navigateToBooking())}),m(1," Book "),l()}}function Fo(i,n){if(i&1&&(N(0,Po,1,2,"app-card-detail-leg",8,R),w(2,Ho,2,0,"button",9)),i&2){let e=b(2);B(e.legInfo),c(2),u("ngIf",e.legInfo.length)}}function Ao(i,n){i&1&&(a(0,"div",7),m(1,"Check network connection..."),l())}function Ro(i,n){if(i&1&&(a(0,"div",1),w(1,Fo,3,1,"button",6)(2,Ao,2,0,"div",7),l()),i&2){let e=b();c(),X(e.legInfo.length?1:2)}}function No(i,n){if(i&1&&(a(0,"div",11)(1,"span"),m(2),l()()),i&2){let e=n.$implicit;c(2),_(e)}}var Bn=(()=>{class i{constructor(e,t,r){this.flightServiceAPI=e,this.router=t,this.bookingService=r,this.itineraryId=I(""),this.tokenItinerary=I(""),this.isLoading=!0,this.flightSegmentInfo=[],this.layoverInfo=[],this.fullDurationSegment="",this.departureDate="",this.legInfo=[],this.toastMessages=[]}ngOnInit(){this.loadFlightDetails()}loadFlightDetails(){this.isLoading=!0,console.log(this.itineraryId()),this.flightServiceAPI.searchDetail(this.itineraryId(),this.tokenItinerary()).subscribe(e=>{console.log("res",e),e.status&&(this.legInfo=e.data.itinerary.legs.map(t=>{let r=t.duration,o=t.departure,{flightSegmentInfo:s,layoverInfo:d}=Zi(t.segments),h=new Array(this.flightSegmentInfo.length).fill(!1);return{flightSegmentInfo:s,layoverInfo:d,fullDurationSegment:r,headerDate:o,isDetailSegmentAmenities:h}})),this.isLoading=!1})}navigateToBooking(){this.bookingService.availabilitySeat(this.itineraryId(),this.tokenItinerary()).pipe(le(e=>{let t=e.isAvailableSeat;console.log("noAvailableSeat",e.isAvailableSeat),t?this.router.navigate(["/booking"],{queryParams:{itineraryId:this.itineraryId()},state:{legInfo:this.legInfo}}):this.showToast("No available seats for this flight.")})).subscribe()}showToast(e){this.toastMessages.push(e),setTimeout(()=>{this.toastMessages.pop()},3e3)}static{this.\u0275fac=function(t){return new(t||i)(y(Ee),y(Ri),y(Xi))}}static{this.\u0275cmp=T({type:i,selectors:[["app-card-detail"]],inputs:{itineraryId:[1,"itineraryId"],tokenItinerary:[1,"tokenItinerary"]},decls:4,vars:2,consts:[[1,"pt-5","px-10","pb-5","max-w-[800px]","min-h-[400px]","flex","flex-col","gap-2","mb-10","-mt-10","-z-10","bg-gradient-to-r","from-blue-50","to-indigo-50","rounded-t-none"],[1,"px-10","max-w-[800px]","flex","flex-col","gap-2","mb-10","-mt-10","bg-gradient-to-br","from-blue-50","via-indigo-50","to-purple-50","rounded-b-xl","py-5","shadow-lg"],[1,"toast","toast-top","toast-end"],["class","alert bg-red-500 text-white shadow-lg",4,"ngFor","ngForOf"],[1,"skeleton","min-h-[300px]","flex","flex-col","gap-2","pt-7","pb-12","rounded-xl","bg-white/80","w-full","border","border-blue-200","shadow-sm"],[1,"w-full","h-[50px]","bg-blue-500","rounded-xl","shadow-md"],[1,"btn","bg-blue-600","hover:bg-blue-700","text-white","text-base","font-bold","transition-colors","duration-200","shadow-md"],[1,"text-blue-800","font-medium","text-center","py-4"],[3,"legInfo","headerText"],["class","btn bg-blue-600 hover:bg-blue-700 text-white text-base font-bold transition-colors duration-200 shadow-md",3,"click",4,"ngIf"],[1,"btn","bg-blue-600","hover:bg-blue-700","text-white","text-base","font-bold","transition-colors","duration-200","shadow-md",3,"click"],[1,"alert","bg-red-500","text-white","shadow-lg"]],template:function(t,r){t&1&&(w(0,Mo,3,0,"div",0)(1,Ro,3,1,"div",1),a(2,"div",2),w(3,No,3,1,"div",3),l()),t&2&&(X(r.isLoading?0:1),c(3),u("ngForOf",r.toastMessages))},dependencies:[ce,$,Mt]})}}return i})();function Uo(i,n){if(i&1&&(a(0,"div",4),m(1),l()),i&2){let e=n.$implicit;c(),O(" ",e," ")}}function jo(i,n){if(i&1&&v(0,"img",31),i&2){let e=n.$implicit,t=n.$index;J("ngSrc",e.logoUrl),J("ngClass",t%2!==0?"absolute right-0 bottom-0":"absolute left-0 top-0")}}function Wo(i,n){if(i&1&&(a(0,"div",23),N(1,jo,1,2,"img",31,R),l()),i&2){let e=b().$implicit;c(),B(e.brandFlight)}}function zo(i,n){if(i&1&&(a(0,"div",24),v(1,"img",32),l()),i&2){let e=b().$implicit;c(),J("ngSrc",e.brandFlight[0].logoUrl)}}function qo(i,n){if(i&1&&(a(0,"div",6)(1,"div",22),w(2,Wo,3,0,"div",23)(3,zo,2,1,"div",24),a(4,"div",25)(5,"div",26),m(6),te(7,"timeFormat"),te(8,"timeFormat"),l(),a(9,"div",27),m(10),l()()(),a(11,"div",28),m(12),l(),a(13,"div",29)(14,"div"),m(15),te(16,"durationFormat"),l(),a(17,"div",30),m(18),l()()()),i&2){let e=n.$implicit;c(2),X(e.brandFlight.length>1?2:3),c(4),it(" ",ie(7,7,e.timeDeparture)," - ",ie(8,9,e.timeArrival)," "),c(4),O(" ",e.brandNameFlight," "),c(2),O(" ",e.stopCount>0?e.stopCount+" stop":"Non-stop"," "),c(3),_(ie(16,11,e.duration)),c(3),_(e.formatedDepDesCode)}}function Ko(i,n){if(i&1&&v(0,"app-card-detail",33),i&2){let e=b();u("tokenItinerary",e.tokenItinerary())("itineraryId",e.flightCard().id)}}var Un=(()=>{class i{constructor(){this.flightCard=I.required(),this.tokenItinerary=I.required(),this.isDetailVisible=!1,this.tagsFlight=[],this.legs=[]}ngOnInit(){this.formatTagFlight(this.flightCard().tags),this.legs=this.flightCard().legs.map(e=>{let t=e.departure,r=e.arrival,o=e.durationInMinutes,s=e.stopCount,d=e.carriers.marketing,h=this.formatBrandFlight(d),g=this.formatDepDesCode(e);return{timeDeparture:t,timeArrival:r,duration:o,stopCount:s,brandFlight:d,brandNameFlight:h,formatedDepDesCode:g}})}toggleDetail(){this.isDetailVisible=!this.isDetailVisible}formatTagFlight(e){e?.map(t=>{this.tagsFlight.push(t)})}formatBrandFlight(e){return e.map(t=>t.name).join(", ")}formatDepDesCode(e){return`${e?.origin.id} - ${e?.destination.id}`}static{this.\u0275fac=function(t){return new(t||i)}}static{this.\u0275cmp=T({type:i,selectors:[["app-card-list"]],inputs:{flightCard:[1,"flightCard"],tokenItinerary:[1,"tokenItinerary"]},decls:38,vars:5,consts:[[1,"flex","flex-row","max-w-[800px]","min-h-[200px]","bg-red-300","z-0","flex-wrap","justify-center","mb-10","max-md:max-w-full",3,"ngClass"],[1,"flex","flex-col","grow","shrink","text-base","font-bold","min-w-[240px]","w-[600px]","max-md:max-w-full"],[1,"flex","flex-wrap","gap-10","justify-end","items-center","p-3","w-full","text-xl","text-cyan-600","whitespace-nowrap","max-md:max-w-full",3,"ngClass"],[1,"flex","flex-row","gap-2"],[1,"gap-2.5","self-stretch","px-6","py-3","my-auto","bg-green-100","rounded-xl","max-md:px-5"],[1,"material-symbols-outlined","text-black"],[1,"flex","gap-10","justify-between","items-start","px-6","py-3","w-full","max-md:px-5","max-md:max-w-full"],[1,"flex","justify-center","items-center","min-h-[200px]","py-4","w-0.5","bg-slate-400"],[1,"flex","flex-col","grow","shrink","px-3","py-3.5","w-44","h-full"],[1,"flex","flex-col","w-full","text-black","whitespace-nowrap"],[1,"flex","gap-6","items-center","w-full","text-base","font-bold"],[1,"flex","overflow-hidden","gap-2.5","items-center","self-stretch","p-1.5","my-auto","rounded-sm","border","border-solid","border-cyan-600","border-opacity-60"],[1,"material-symbols-outlined"],[1,"self-stretch","my-auto"],[1,"flex","gap-2.5","items-center","self-stretch","p-1.5","my-auto","rounded-sm","border","border-solid","border-cyan-600","border-opacity-60"],[1,"flex","flex-col","mt-1.5","w-full"],[1,"text-3xl","font-bold"],[1,"flex","flex-col","mt-2","text-base","w-[70px]"],[1,"btn","btn-success",3,"click"],[1,"self-stretch","my-auto","text-white"],[1,"material-symbols-outlined","text-white"],[3,"tokenItinerary","itineraryId",4,"ngIf"],[1,"flex","gap-2","items-start","self-stretch","min-w-[240px]","relative"],[1,"flex","justify-between","flex-wrap","w-10","h-10","relative"],[1,"w-10","h-10"],[1,"flex","flex-col","w-[187px]"],[1,"text-black"],[1,"mt-2","text-black","text-opacity-50"],[1,"self-stretch","text-black"],[1,"flex","flex-col","self-stretch","text-black","w-[72px]"],[1,"mt-2","whitespace-nowrap"],["width","20","height","20",3,"ngSrc","ngClass"],["width","40","height","40",1,"object-contain","shrink-0",3,"ngSrc"],[3,"tokenItinerary","itineraryId"]],template:function(t,r){t&1&&(a(0,"div",0)(1,"section",1)(2,"header",2)(3,"div",3),N(4,Uo,2,1,"div",4,R),l(),a(6,"span",5),m(7," favorite "),l()(),N(8,qo,19,13,"div",6,R),l(),v(10,"div",7),a(11,"section",8)(12,"div",9)(13,"div",10)(14,"div",11)(15,"span",12),m(16," travel_luggage_and_bags "),l(),a(17,"div",13),m(18,"1"),l()(),a(19,"div",14)(20,"span",12),m(21," work "),l(),a(22,"div",13),m(23,"0"),l()()(),a(24,"div",15)(25,"div",16),m(26),l(),a(27,"div",17)(28,"div"),m(29,"Economy"),l(),a(30,"div"),m(31,"eDream"),l()()()(),a(32,"button",18),S("click",function(){return r.toggleDetail()}),a(33,"span",19),m(34,"View Detail"),l(),a(35,"span",20),m(36),l()()()(),w(37,Ko,1,2,"app-card-detail",21)),t&2&&(J("ngClass",r.isDetailVisible?"rounded-t-xl":"rounded-xl"),c(2),u("ngClass",r.tagsFlight.length?"justify-between":"justify-end"),c(2),B(r.tagsFlight),c(4),B(r.legs),c(18),_(r.flightCard().price.formatted),c(10),O(" ",r.isDetailVisible?"arrow_drop_up":"arrow_drop_down"," "),c(),u("ngIf",r.isDetailVisible))},dependencies:[rt,$,st,Bn,pt,dt]})}}return i})();var Go=()=>[1,2,3,4,5];function Qo(i,n){i&1&&(a(0,"div"),v(1,"app-loading-page"),l())}function Yo(i,n){i&1&&v(0,"div",10)}function Jo(i,n){i&1&&(a(0,"div",8),w(1,Yo,1,0,"div",9),l()),i&2&&(c(),u("ngForOf",Mi(1,Go)))}function Zo(i,n){if(i&1&&(a(0,"div",12),v(1,"app-card-list",13),l()),i&2){let e=n.$implicit,t=b(4);c(),u("flightCard",e)("tokenItinerary",t.tokenItinerary())}}function Xo(i,n){if(i&1&&(a(0,"div",8),N(1,Zo,2,2,"div",12,R),l()),i&2){let e=b(3);c(),B(e.flightListResult())}}function es(i,n){i&1&&(a(0,"div",11)(1,"div",14),_i(),a(2,"svg",15),v(3,"path",16),l()(),Oi(),a(4,"h3",17),m(5,"No Flights Found"),l(),a(6,"p",18),m(7,"We couldn't find any flights matching your search criteria."),l(),a(8,"p",19),m(9,"Try adjusting your filters or searching for different dates."),l()())}function ts(i,n){if(i&1&&w(0,Xo,3,0,"div",8)(1,es,10,0,"div",11),i&2){let e=b(2);X(e.flightListResult().length>0?0:1)}}function is(i,n){if(i&1){let e=q();a(0,"div",3),v(1,"app-card-search",4),a(2,"div",5)(3,"app-card-filter",6),S("filterChange",function(r){F(e);let o=b();return A(o.filterStatsChange(r))}),l(),a(4,"div",7),S("scrolled",function(){F(e);let r=b();return A(r.onScroll())}),w(5,Jo,2,2,"div",8)(6,ts,2,1),l()()()}if(i&2){let e=b();c(),u("paramSearch",e.paramSearch),c(2),u("filterStats",e.filterStats()),c(),u("infiniteScrollDistance",2)("infiniteScrollThrottle",300),c(),X(e.isLoadingFlight?5:6)}}function ns(i,n){i&1&&(a(0,"div"),v(1,"app-loading-page"),l())}function rs(i,n){i&1&&v(0,"div",39)}function os(i,n){if(i&1&&(a(0,"div",26)(1,"div",27)(2,"div",28),v(3,"img",29),a(4,"div")(5,"h3",30),m(6),l(),a(7,"p",31),m(8),l()()(),a(9,"div",32)(10,"p",33),m(11),l(),a(12,"p",31),m(13),l()(),a(14,"div",32)(15,"p",31),m(16),l(),a(17,"div",34),w(18,rs,1,0,"div",35),l(),a(19,"p",36),m(20),l()(),a(21,"div",32)(22,"p",33),m(23),l(),a(24,"p",31),m(25),l()(),a(26,"div",32)(27,"p",37),m(28),l(),a(29,"button",38),m(30," Select "),l()()()()),i&2){let e=n.$implicit;c(3),u("src",e.airlinePhoto,Ii),c(3),_(e.airline),c(2),O(" Flight ",e.flightNumber," "),c(3),_(e.departureTime),c(2),_(e.origin),c(3),_(e.duration),c(2),u("ngIf",e.stops>0),c(2),O("",e.stops," stop(s)"),c(3),_(e.arrivalTime),c(2),_(e.destination),c(3),O(" $",e.price," ")}}function ss(i,n){if(i&1){let e=q();a(0,"div",20)(1,"div",21),v(2,"app-card-search",4),a(3,"div",22)(4,"app-card-filter",6),S("filterChange",function(r){F(e);let o=b();return A(o.filterStatsChange(r))}),l(),a(5,"div",23)(6,"div",24),w(7,os,31,11,"div",25),l()()()()()}if(i&2){let e=b();c(2),u("paramSearch",e.paramSearch),c(2),u("filterStats",e.filterStats()),c(3),u("ngForOf",e.flights)}}var jn=(()=>{class i{constructor(e,t,r,o){this.route=e,this._flightServiceAPI=t,this._flightSearchService=r,this.fb=o,this.isLoading=!0,this.isLoadingFlight=!1,this.flightListResult=D([]),this.filterStats=D({}),this.pageSize=10,this.currentPage=1,this.allFlights=[],this.tokenItinerary=D(""),this.filteredFlights=[],this.scrollDistance=1,this.throttle=300,this.flights=[{id:"VN405",airline:"Vietnam Airlines",airlinePhoto:"https://tinhocnews.com/wp-content/uploads/2024/06/vietnam-airlines-logo-png.jpg",flightNumber:"VN405",departureTime:"07:30 AM",arrivalTime:"02:15 PM",duration:"4h 45m",origin:"Hanoi (HAN)",destination:"Incheon (ICN)",stops:0,price:450},{id:"KE684",airline:"Korean Air",airlinePhoto:"https://encrypted-tbn0.gstatic.com/images?q=tbn:ANd9GcQxkdT4bGelSzZCzKQ4ika7oDt3wS4FYls3Kg&s",flightNumber:"KE684",departureTime:"10:45 AM",arrivalTime:"05:30 PM",duration:"4h 45m",origin:"Hanoi (HAN)",destination:"Incheon (ICN)",stops:0,price:520},{id:"VJ862",airline:"VietJet Air",airlinePhoto:"https://brasol.vn/wp-content/uploads/2022/08/logo-vietjet-air.jpg",flightNumber:"VJ862",departureTime:"02:30 PM",arrivalTime:"11:15 PM",duration:"5h 45m",origin:"Hanoi (HAN)",destination:"Incheon (ICN)",stops:1,price:320},{id:"OZ733",airline:"Asiana Airlines",airlinePhoto:"https://encrypted-tbn0.gstatic.com/images?q=tbn:ANd9GcRbGKtwdxpqIcbjWdyM4jQmEm6fKO2w8Q3VMg&s",flightNumber:"OZ733",departureTime:"09:20 AM",arrivalTime:"04:05 PM",duration:"4h 45m",origin:"Hanoi (HAN)",destination:"Incheon (ICN)",stops:0,price:490},{id:"VN403",airline:"Vietnam Airlines",airlinePhoto:"https://tinhocnews.com/wp-content/uploads/2024/06/vietnam-airlines-logo-png.jpg",flightNumber:"VN403",departureTime:"01:30 PM",arrivalTime:"08:15 PM",duration:"4h 45m",origin:"Hanoi (HAN)",destination:"Incheon (ICN)",stops:0,price:475},{id:"KE686",airline:"Korean Air",airlinePhoto:"https://encrypted-tbn0.gstatic.com/images?q=tbn:ANd9GcQxkdT4bGelSzZCzKQ4ika7oDt3wS4FYls3Kg&s",flightNumber:"KE686",departureTime:"03:45 PM",arrivalTime:"10:30 PM",duration:"4h 45m",origin:"Hanoi (HAN)",destination:"Incheon (ICN)",stops:0,price:510},{id:"VJ864",airline:"VietJet Air",airlinePhoto:"https://brasol.vn/wp-content/uploads/2022/08/logo-vietjet-air.jpg",flightNumber:"VJ864",departureTime:"06:15 AM",arrivalTime:"03:00 PM",duration:"5h 45m",origin:"Hanoi (HAN)",destination:"Incheon (ICN)",stops:1,price:310},{id:"OZ735",airline:"Asiana Airlines",airlinePhoto:"https://encrypted-tbn0.gstatic.com/images?q=tbn:ANd9GcRbGKtwdxpqIcbjWdyM4jQmEm6fKO2w8Q3VMg&s",flightNumber:"OZ735",departureTime:"11:50 AM",arrivalTime:"06:35 PM",duration:"4h 45m",origin:"Hanoi (HAN)",destination:"Incheon (ICN)",stops:0,price:495},{id:"VN407",airline:"Vietnam Airlines",airlinePhoto:"https://tinhocnews.com/wp-content/uploads/2024/06/vietnam-airlines-logo-png.jpg",flightNumber:"VN407",departureTime:"04:30 PM",arrivalTime:"11:15 PM",duration:"4h 45m",origin:"Hanoi (HAN)",destination:"Incheon (ICN)",stops:0,price:460},{id:"KE688",airline:"Korean Air",airlinePhoto:"https://encrypted-tbn0.gstatic.com/images?q=tbn:ANd9GcQxkdT4bGelSzZCzKQ4ika7oDt3wS4FYls3Kg&s",flightNumber:"KE688",departureTime:"08:15 AM",arrivalTime:"03:00 PM",duration:"4h 45m",origin:"Hanoi (HAN)",destination:"Incheon (ICN)",stops:0,price:530},{id:"VJ866",airline:"VietJet Air",airlinePhoto:"https://brasol.vn/wp-content/uploads/2022/08/logo-vietjet-air.jpg",flightNumber:"VJ866",departureTime:"12:45 PM",arrivalTime:"09:30 PM",duration:"5h 45m",origin:"Hanoi (HAN)",destination:"Incheon (ICN)",stops:1,price:315},{id:"OZ737",airline:"Asiana Airlines",airlinePhoto:"https://encrypted-tbn0.gstatic.com/images?q=tbn:ANd9GcRbGKtwdxpqIcbjWdyM4jQmEm6fKO2w8Q3VMg&s",flightNumber:"OZ737",departureTime:"02:20 PM",arrivalTime:"09:05 PM",duration:"4h 45m",origin:"Hanoi (HAN)",destination:"Incheon (ICN)",stops:0,price:485},{id:"VN409",airline:"Vietnam Airlines",airlinePhoto:"https://tinhocnews.com/wp-content/uploads/2024/06/vietnam-airlines-logo-png.jpg",flightNumber:"VN409",departureTime:"07:00 PM",arrivalTime:"01:45 AM",duration:"4h 45m",origin:"Hanoi (HAN)",destination:"Incheon (ICN)",stops:0,price:440},{id:"KE690",airline:"Korean Air",airlinePhoto:"https://encrypted-tbn0.gstatic.com/images?q=tbn:ANd9GcQxkdT4bGelSzZCzKQ4ika7oDt3wS4FYls3Kg&s",flightNumber:"KE690",departureTime:"05:30 PM",arrivalTime:"00:15 AM",duration:"4h 45m",origin:"Hanoi (HAN)",destination:"Incheon (ICN)",stops:0,price:515},{id:"VJ868",airline:"VietJet Air",airlinePhoto:"https://brasol.vn/wp-content/uploads/2022/08/logo-vietjet-air.jpg",flightNumber:"VJ868",departureTime:"09:45 PM",arrivalTime:"06:30 AM",duration:"5h 45m",origin:"Hanoi (HAN)",destination:"Incheon (ICN)",stops:1,price:305}],this.airlines=[{id:"delta",name:"Delta Airlines"},{id:"united",name:"United Airlines"},{id:"american",name:"American Airlines"},{id:"southwest",name:"Southwest Airlines"}],this.searchForm=this.fb.group({departure:["",W.required],arrival:["",W.required],tripType:["oneWay",W.required],date:["",W.required],priceRange:[1e3]})}ngOnInit(){this.searchForm.valueChanges.subscribe(e=>{console.log("Form values:",e)}),this.initData()}initData(){this.route.queryParams.subscribe(e=>{let{from_departure_id:t,to_destination_id:r,from_departure:o,to_destination:s,depart_date:d,return_date:h,class_type:g,traveller_type:x}=e;this.paramSearch={from_departure_id:t,to_destination_id:r,from_departure:o,to_destination:s,depart_date:d,return_date:h},h&&d?this.searchRoundTrip(t,r,d,h,g,x):this.searchOneWay(t,r,d,g,x)})}searchRoundTrip(e,t,r,o,s,d){this._flightServiceAPI.searchRoundTrip({departureEntityId:e,arrivalEntityId:t,departDate:r,returnDate:o,classType:s,travellerType:d}).subscribe(h=>{this.allFlights=this.convertToUserTimeZone(h.data.itineraries),console.log("token: ",h.data.token),this.tokenItinerary.set(h.data.token),this.filteredFlights=this.allFlights,this.setFilterStats(h),this.flightListResult.set(this.allFlights.slice(0,this.pageSize)),this.isLoading=!1},h=>{console.error("Error fetching flight results:",h),this.isLoading=!1})}searchOneWay(e,t,r,o,s){this._flightServiceAPI.searchOneWay({departureEntityId:e,arrivalEntityId:t,departDate:r,classType:o,travellerType:s}).pipe(_e(d=>(this.allFlights=this.convertToUserTimeZone(d.data.itineraries),this.tokenItinerary.set(d.data.token),this.filteredFlights=this.allFlights,this.setFilterStats(d),this.flightListResult.set(this.allFlights.slice(0,this.pageSize)),this.isLoading=!1,this.allFlights)),_e(d=>{let h=Array.isArray(d)?d.slice(0,4):[];return console.log("first4Flights 1: ",h),h}),Ye(d=>(console.log("first4Flights 2: ",d),Ht(d.map(h=>(console.log("flight: ",h),this._flightServiceAPI.searchDetail(h.id,this.tokenItinerary()))))))).subscribe()}convertToUserTimeZone(e){return e.map(t=>P(M({},t),{legs:t.legs.map(r=>P(M({},r),{departure:ze(r.departure),arrival:ze(r.arrival),segments:r.segments.map(o=>P(M({},o),{departure:ze(o.departure),arrival:ze(o.arrival)}))}))}))}setFilterStats(e){this.filterStats.update(()=>{let{duration:t,airports:r,carriers:o}=e.data.filterStats,s=e.data.filterStats.stopPrices;s.direct.isActive=s.direct.isPresent,s.one.isActive=s.one.isPresent,s.twoOrMore.isActive=s.twoOrMore.isPresent,o.forEach(H=>{H.isActive=!0}),r.forEach(H=>{H.airports.forEach(oe=>{oe.isActive=!0})});let{minTime:d,maxTime:h}=this.getMinMaxTimes(e.data.itineraries,"departure"),{minTime:g,maxTime:x}=this.getMinMaxTimes(e.data.itineraries,"departure"),L={minTimeDeparture:d,maxTimeDeparture:h,minTimeLanding:g,maxTimeLanding:x},k=this.getMinMaxPrice(e.data.itineraries);return{duration:t,airports:r,carriers:o,stopPrices:s,timeRange:L,priceRange:k}})}getMinMaxTimes(e,t){let o=e.map(s=>s.legs[0][t]).sort((s,d)=>{let h=new Date(s),g=new Date(d);return h.getTime()-g.getTime()});return{minTime:o[0],maxTime:o[o.length-1]}}getMinMaxPrice(e){let t=e.map(r=>Math.round(r.price.raw));return{minPrice:Math.min(...t),maxPrice:Math.max(...t)}}filterStatsChange(e){this.isLoadingFlight=!0,setTimeout(()=>{this.filteredFlights=this._flightSearchService.filterFlights(this.allFlights,e),this.currentPage=1,this.flightListResult.set(this.filteredFlights.slice(0,this.pageSize)),this.isLoadingFlight=!1},1e3)}onScroll(){let e=this.currentPage+1,t=this.currentPage*this.pageSize,r=t+this.pageSize,o=this.filteredFlights.slice(t,r);o.length>0&&(this.currentPage=e,Ht(o.map(s=>this._flightServiceAPI.searchDetail(s.id,this.tokenItinerary()))).subscribe(),this.flightListResult.update(s=>[...s,...o]))}static{this.\u0275fac=function(t){return new(t||i)(y(Ai),y(Ee),y(tn),y(at))}}static{this.\u0275cmp=T({type:i,selectors:[["app-flight"]],decls:4,vars:4,consts:[[4,"ngIf"],["class","w-full h-full px-20 overflow-x-hidden flex flex-col justify-center items-center",4,"ngIf"],["class","min-h-screen bg-gray-50 p-4 overflow-x-hidden",4,"ngIf"],[1,"w-full","h-full","px-20","overflow-x-hidden","flex","flex-col","justify-center","items-center"],[3,"paramSearch"],[1,"flex","flex-row","w-full","gap-10","justify-center","items-start","mx-auto"],[3,"filterChange","filterStats"],["infinite-scroll","",1,"search-results","min-w-[800px]","space-y-6",3,"scrolled","infiniteScrollDistance","infiniteScrollThrottle"],[1,"grid","gap-6"],["class","skeleton animate-pulse bg-gradient-to-r from-gray-200 to-gray-300 rounded-xl shadow-lg min-h-[200px]",4,"ngFor","ngForOf"],[1,"skeleton","animate-pulse","bg-gradient-to-r","from-gray-200","to-gray-300","rounded-xl","shadow-lg","min-h-[200px]"],[1,"flex","flex-col","items-center","justify-center","p-12","bg-white","rounded-2xl","shadow-lg"],[1,"transform","hover:scale-[1.02]","transition-transform","duration-200"],[3,"flightCard","tokenItinerary"],[1,"bg-blue-50","p-6","rounded-full","mb-6"],["xmlns","http://www.w3.org/2000/svg","fill","none","viewBox","0 0 24 24","stroke","currentColor",1,"w-20","h-20","text-blue-500"],["stroke-linecap","round","stroke-linejoin","round","stroke-width","2","d","M12 19l9 2-9-18-9 18 9-2zm0 0v-8"],[1,"text-2xl","font-bold","text-gray-800","mb-4"],[1,"text-gray-600","text-center","mb-3"],[1,"text-blue-600","font-medium"],[1,"min-h-screen","bg-gray-50","p-4","overflow-x-hidden"],[1,"max-w-7xl","mx-auto"],[1,"flex","flex-col","lg:flex-row","gap-8"],[1,"lg:w-3/4"],[1,"space-y-4"],["class","bg-white rounded-lg shadow-md p-6 hover:shadow-lg transition duration-200",4,"ngFor","ngForOf"],[1,"bg-white","rounded-lg","shadow-md","p-6","hover:shadow-lg","transition","duration-200"],[1,"flex","flex-col","md:flex-row","justify-between","items-center","gap-4"],[1,"flex","items-center","space-x-4"],["alt","Airline Logo",1,"w-16","h-16","object-contain",3,"src"],[1,"font-semibold"],[1,"text-sm","text-gray-600"],[1,"flex","flex-col","items-center"],[1,"text-lg","font-bold"],[1,"w-32","h-0.5","bg-gray-300","relative"],["class","absolute top-1/2 left-1/2 transform -translate-x-1/2 -translate-y-1/2 w-2 h-2 bg-gray-400 rounded-full",4,"ngIf"],[1,"text-xs","text-gray-500"],[1,"text-2xl","font-bold","text-blue-600"],[1,"px-4","py-2","bg-blue-600","text-white","rounded-md","hover:bg-blue-700","transition","duration-200"],[1,"absolute","top-1/2","left-1/2","transform","-translate-x-1/2","-translate-y-1/2","w-2","h-2","bg-gray-400","rounded-full"]],template:function(t,r){t&1&&w(0,Qo,2,0,"div",0)(1,is,7,5,"div",1)(2,ns,2,0,"div",0)(3,ss,8,3,"div",2),t&2&&(u("ngIf",r.isLoading),c(),u("ngIf",!r.isLoading),c(),u("ngIf",r.isLoading),c(),u("ngIf",!r.isLoading))},dependencies:[ce,$,kt,Vt,An,Nn,Un]})}}return i})();var Wn=(()=>{class i{static{this.\u0275fac=function(t){return new(t||i)}}static{this.\u0275cmp=T({type:i,selectors:[["app-detail"]],decls:0,vars:0,template:function(t,r){}})}}return i})();var as=[{path:"",component:jn,children:[{path:"detail",component:Wn}]}],zn=(()=>{class i{static{this.\u0275fac=function(t){return new(t||i)}}static{this.\u0275mod=pe({type:i})}static{this.\u0275inj=de({imports:[V,zt.forChild(as),zt]})}}return i})();var Up=(()=>{class i{static{this.\u0275fac=function(t){return new(t||i)}}static{this.\u0275mod=pe({type:i})}static{this.\u0275inj=de({imports:[V,Yi,zn,lt,kt,Mt,Vt,It,Dt,Rn]})}}return i})();export{Up as FlightModule};
